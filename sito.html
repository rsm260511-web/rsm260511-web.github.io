<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>RSM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: #0e0e11;
      color: #eaeaea;
    }
    header {
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee');
      background-size: cover;
      background-position: center;
      padding: 80px 20px;
      text-align: center;
    }
    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 48px;
      margin: 0;
    }
    nav {
      background: #15151c;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    nav a {
      color: #eaeaea;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    #titlesContainer a {
      opacity: 0.85;
      margin-right: 10px;
    }
    #titlesContainer a:hover {
      opacity: 1;
      text-decoration: underline;
    }
    #searchBox {
      margin-left: auto;
      position: relative;
    }
    #searchInput {
      padding: 6px;
      font-size: 14px;
    }
    #searchResults {
      position: absolute;
      top: 32px;
      left: 0;
      right: 0;
      background: #1c1c25;
      z-index: 1000;
      border-radius: 6px;
    }
    #searchResults div {
      padding: 6px;
      cursor: pointer;
    }
    #searchResults div:hover {
      background: #2a2a35;
    }
    main {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    .card {
      background: #1c1c25;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    textarea, input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-family: 'Montserrat', sans-serif;
    }
    button {
      background: #6f7cff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover { background: #5a66e0; }
    #admin, #singleArticle { display: none; }
    .admin-article {
      border: 1px solid #3a3a45;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 6px;
    }
    .admin-article input, .admin-article textarea {
      margin-top: 5px;
      margin-bottom: 5px;
    }
    .admin-controls span {
      cursor: pointer;
      margin-left: 5px;
      color: #ff6b6b;
    }
  </style>
</head>
<body>

<header>
  <h1>RSM</h1>
</header>

<nav>
  <a onclick="showHome()">Home</a>
  <a onclick="askPassword()">Admin</a>
  <span id="titlesContainer"></span>
  <div id="searchBox">
    <input type="text" id="searchInput" placeholder="Cerca..." oninput="searchArticles()">
    <div id="searchResults"></div>
  </div>
</nav>

<main>
  <section id="home">
    <div class="card">
      <h2>Chi siamo?</h2>
      <p id="publicDescription"></p>
    </div>
    <section id="articles"></section>
  </section>

  <section id="singleArticle" class="card">
    <h2 id="singleTitle"></h2>
    <div id="singleContent"></div>
  </section>

  <section id="admin" class="card">
    <h2>Area Admin</h2>

    <h3>Descrizione del sito</h3>
    <textarea id="siteDescription" rows="5"></textarea>
    <button onclick="saveDescription()">Salva descrizione</button>

    <h3>Nuovo contenuto</h3>
    <input type="text" id="title" placeholder="Titolo">
    <textarea id="content" rows="10" placeholder="Testo (puoi incollare immagini)"></textarea>
    <button onclick="addArticle()">Pubblica</button>

    <h3>Articoli esistenti</h3>
    <div id="adminArticles"></div>
  </section>
</main>

<script>
  const ADMIN_PASSWORD = 'vjFDd2kH';
  let articles = JSON.parse(localStorage.getItem('articles')) || [];
  let description = localStorage.getItem('siteDescription') || '';

  document.getElementById('siteDescription').value = description;
  document.getElementById('publicDescription').innerText = description;

  function saveDescription() {
    const text = document.getElementById('siteDescription').value;
    localStorage.setItem('siteDescription', text);
    document.getElementById('publicDescription').innerText = text;
    alert('Descrizione salvata');
  }

  function askPassword() {
    const pass = prompt('Password admin');
    if (pass === ADMIN_PASSWORD) showAdmin();
    else alert('Password errata');
  }

  function renderArticles() {
    const container = document.getElementById('articles');
    const titles = document.getElementById('titlesContainer');
    const adminContainer = document.getElementById('adminArticles');
    container.innerHTML = '';
    titles.innerHTML = '';
    adminContainer.innerHTML = '';

    articles.forEach((a, i) => {
      // Home display
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h2>${a.title}</h2>`;
      card.onclick = () => openArticle(i);
      container.appendChild(card);

      const link = document.createElement('a');
      link.textContent = a.title;
      link.onclick = () => openArticle(i);
      titles.appendChild(link);

      // Admin display
      const adminCard = document.createElement('div');
      adminCard.className = 'admin-article';
      adminCard.innerHTML = `
        <input type='text' value='${a.title}' id='adminTitle${i}'>
        <textarea rows='5' id='adminContent${i}'>${a.content.replace(/<br>/g,'\n')}</textarea>
        <div class='admin-controls'>
          <button onclick='saveArticle(${i})'>Salva</button>
          <span onclick='deleteArticle(${i})'>ðŸ—‘</span>
        </div>
      `;
      adminContainer.appendChild(adminCard);
    });
  }

  function addArticle() {
    const title = document.getElementById('title').value;
    let content = document.getElementById('content').value.replace(/\n/g, '<br>');
    if (!title || !content) return alert('Compila tutto');
    articles.unshift({ title, content });
    localStorage.setItem('articles', JSON.stringify(articles));
    document.getElementById('title').value = '';
    document.getElementById('content').value = '';
    renderArticles();
    showAdmin();
  }

  function saveArticle(i) {
    const newTitle = document.getElementById(`adminTitle${i}`).value;
    const newContent = document.getElementById(`adminContent${i}`).value.replace(/\n/g,'<br>');
    articles[i] = { title: newTitle, content: newContent };
    localStorage.setItem('articles', JSON.stringify(articles));
    renderArticles();
  }

  function deleteArticle(index) {
    if (!confirm('Vuoi eliminare questo contenuto?')) return;
    articles.splice(index, 1);
    localStorage.setItem('articles', JSON.stringify(articles));
    renderArticles();
  }

  function openArticle(i) {
    document.getElementById('home').style.display = 'none';
    document.getElementById('admin').style.display = 'none';
    document.getElementById('singleArticle').style.display = 'block';
    document.getElementById('singleTitle').innerText = articles[i].title;
    document.getElementById('singleContent').innerHTML = articles[i].content;
  }

  function showHome() {
    document.getElementById('home').style.display = 'block';
    document.getElementById('admin').style.display = 'none';
    document.getElementById('singleArticle').style.display = 'none';
    renderArticles();
  }

  function showAdmin() {
    document.getElementById('home').style.display = 'none';
    document.getElementById('admin').style.display = 'block';
    document.getElementById('singleArticle').style.display = 'none';
    renderArticles();
  }

  function searchArticles() {
    const q = document.getElementById('searchInput').value.toLowerCase();
    const box = document.getElementById('searchResults');
    box.innerHTML = '';
    if (!q) return;
    articles.filter(a => a.title.toLowerCase().includes(q)).forEach((a, i) => {
      const d = document.createElement('div');
      d.textContent = a.title;
      d.onclick = () => { openArticle(i); box.innerHTML=''; };
      box.appendChild(d);
    });
  }

  renderArticles();
</script>

</body>
</html>