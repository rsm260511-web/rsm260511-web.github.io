<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>RSM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="RSM - Platform for mysteries, current affairs and little-known stories in 9 languages">
    <meta name="keywords" content="RSM, mysteries, news, articles, videos, investigations">
    <meta property="og:title" content="RSM Multimedia Platform">
    <meta property="og:description" content="Explore mysteries and current affairs in 9 languages">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/png" href="rsm-header.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #0a0a0f;
            --secondary-dark: #111118;
            --card-dark: #1a1a24;
            --accent-red: #ff4757;
            --accent-blue: #2e86de;
            --accent-purple: #9b59b6;
            --accent-green: #10ac84;
            --accent-orange: #ff9f43;
            --text-primary: #ffffff;
            --text-secondary: #b0b0c0;
            --text-muted: #8888a0;
            --gradient-primary: linear-gradient(135deg, #ff4757 0%, #ff6b81 100%);
            --gradient-secondary: linear-gradient(135deg, #2e86de 0%, #54a0ff 100%);
            --gradient-purple: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            --gradient-dark: linear-gradient(135deg, #1a1a24 0%, #2d2d3d 100%);
            --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.5);
            --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.4);
            --shadow-sm: 0 5px 15px rgba(0, 0, 0, 0.3);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--primary-dark);
            color: var(--text-primary);
            line-height: 1.7;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
            width: 100%;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 71, 87, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(46, 134, 222, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(155, 89, 182, 0.05) 0%, transparent 60%);
            z-index: -1;
            pointer-events: none;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff2e43 0%, #ff4757 100%);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }

        header {
            background: 
                linear-gradient(rgba(10, 10, 15, 0.92), rgba(10, 10, 15, 0.98)),
                url('https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2068&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 120px 20px 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, 
                rgba(255, 71, 87, 0.15) 0%, 
                rgba(155, 89, 182, 0.15) 50%, 
                rgba(46, 134, 222, 0.15) 100%);
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
            max-width: 1000px;
            animation: fadeInUp 1.2s ease-out;
            width: 100%;
        }

        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 10vw, 5rem);
            font-weight: 800;
            margin-bottom: 25px;
            background: linear-gradient(45deg, #fff 0%, #ff9f9f 30%, #ffb8b8 70%, #fff 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            line-height: 1.1;
            letter-spacing: 1px;
            word-break: break-word;
        }

        header .tagline {
            font-size: clamp(1.2rem, 4vw, 1.6rem);
            color: var(--text-secondary);
            margin-bottom: 40px;
            font-weight: 400;
            letter-spacing: 1.5px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 10px;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 60px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            padding: 25px 30px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 150px;
            transition: var(--transition);
            flex: 1 1 auto;
            max-width: 200px;
        }

        .stat-item:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-red);
        }

        .stat-number {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: clamp(0.8rem, 2vw, 1rem);
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 600;
        }

        nav {
            background: rgba(17, 17, 24, 0.98);
            backdrop-filter: blur(20px);
            padding: 18px 40px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: var(--shadow-md);
            gap: 20px;
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            flex: 1;
            justify-content: center;
        }

        .nav-link {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            padding: 14px 28px;
            border-radius: 50px;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
            font-size: clamp(0.8rem, 2vw, 1rem);
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: 0.8px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid transparent;
            white-space: nowrap;
        }

        .nav-link i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .nav-link:hover {
            background: rgba(255, 71, 87, 0.15);
            color: var(--accent-red);
            transform: translateY(-2px);
            border-color: rgba(255, 71, 87, 0.3);
            box-shadow: var(--shadow-sm);
        }

        .nav-link.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.3);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .search-container {
            position: relative;
            min-width: 350px;
            width: 100%;
            max-width: 400px;
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        #searchInput {
            width: 100%;
            padding: 16px 25px 16px 60px;
            border-radius: 50px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
            font-size: 1.05rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        #searchInput:focus {
            outline: none;
            border-color: var(--accent-red);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 5px rgba(255, 71, 87, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.2rem;
            z-index: 1;
        }

        #searchResults {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-dark);
            border-radius: var(--border-radius-sm);
            margin-top: 15px;
            display: none;
            z-index: 1000;
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(20px);
        }

        .search-item {
            padding: 18px 25px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-item:hover {
            background: rgba(255, 71, 87, 0.12);
        }

        .search-item-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(46, 134, 222, 0.2);
            color: var(--accent-blue);
            font-size: 1.2rem;
        }

        .search-item-content {
            flex: 1;
        }

        .search-item-title {
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .language-selector {
            position: relative;
        }

        .language-btn {
            padding: 12px 25px;
            background: rgba(46, 134, 222, 0.2);
            color: var(--accent-blue);
            border: 2px solid rgba(46, 134, 222, 0.3);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            min-width: 110px;
            justify-content: center;
            backdrop-filter: blur(10px);
            font-size: 1rem;
        }

        .language-btn:hover {
            background: rgba(46, 134, 222, 0.3);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 134, 222, 0.25);
        }

        .language-dropdown {
            position: absolute;
            top: 60px;
            right: 0;
            background: var(--card-dark);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            min-width: 220px;
            display: none;
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            border: 1px solid rgba(255, 255, 255, 0.15);
            animation: fadeInDown 0.3s ease;
            backdrop-filter: blur(20px);
        }

        .language-option {
            padding: 14px 18px;
            cursor: pointer;
            border-radius: 10px;
            margin: 6px 0;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
        }

        .language-option:hover {
            background: rgba(46, 134, 222, 0.15);
            transform: translateX(8px);
        }

        main {
            margin: 60px auto;
            padding: 0 20px;
        }

        .card {
            background: var(--card-dark);
            padding: 35px;
            border-radius: var(--border-radius);
            margin-bottom: 35px;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient-primary);
        }

        .card:hover {
            transform: translateY(-12px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(255, 71, 87, 0.25);
        }

        .hidden {
            display: none !important;
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 35px;
            margin-top: 35px;
        }

        .feature-card {
            background: linear-gradient(145deg, rgba(26, 26, 36, 0.9), rgba(34, 34, 48, 0.9));
            border-radius: var(--border-radius);
            padding: 35px;
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            height: 100%;
            backdrop-filter: blur(10px);
        }

        .feature-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .feature-card-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .feature-card-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: rgba(255, 71, 87, 0.15);
            color: var(--accent-red);
            box-shadow: var(--shadow-sm);
            flex-shrink: 0;
        }

        .feature-card-title {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .feature-card-content h3 {
            font-size: 2rem;
            margin-bottom: 20px;
            line-height: 1.4;
            background: linear-gradient(45deg, #fff, #ffb8b8);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .feature-card-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.15);
            flex-wrap: wrap;
            gap: 15px;
        }

        .section-title {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 800;
            background: linear-gradient(45deg, #fff, var(--accent-blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .section-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 700;
            color: var(--text-primary);
            border: 2px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            white-space: nowrap;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 35px;
            margin-top: 35px;
        }

        .content-item {
            background: linear-gradient(145deg, rgba(26, 26, 36, 0.9), rgba(34, 34, 48, 0.9));
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            height: 100%;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
        }

        .content-item:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: var(--shadow-lg);
            border-color: rgba(255, 71, 87, 0.3);
        }

        .content-item-image {
            width: 100%;
            height: 220px;
            overflow: hidden;
            position: relative;
        }

        .content-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .content-item:hover .content-item-image img {
            transform: scale(1.15);
        }

        .content-item-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: var(--shadow-sm);
            z-index: 1;
        }

        .content-item-content {
            padding: 30px;
            flex: 1;
        }

        .content-item h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            line-height: 1.4;
            color: var(--text-primary);
            font-weight: 700;
            word-break: break-word;
        }

        .content-item p {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .content-item-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.95rem;
            flex-wrap: wrap;
            gap: 10px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .meta-item i {
            font-size: 1.1rem;
            color: var(--accent-blue);
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .category-card {
            background: linear-gradient(145deg, rgba(26, 26, 36, 0.9), rgba(34, 34, 48, 0.9));
            border-radius: var(--border-radius);
            padding: 30px;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .category-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: rgba(46, 134, 222, 0.15);
            color: var(--accent-blue);
            box-shadow: var(--shadow-sm);
            flex-shrink: 0;
        }

        .category-title {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            word-break: break-word;
        }

        .category-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .category-item {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            word-break: break-word;
        }

        .category-item:hover {
            background: rgba(255, 71, 87, 0.15);
            transform: translateX(15px);
            color: var(--accent-red);
        }

        .category-item i {
            font-size: 1rem;
            color: var(--accent-blue);
        }

        #single .media-container {
            margin: 40px 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            background: rgba(0, 0, 0, 0.3);
        }

        #single img {
            width: 100%;
            max-height: 550px;
            object-fit: cover;
            border-radius: var(--border-radius);
            display: block;
        }

        #single iframe {
            width: 100%;
            height: 550px;
            border-radius: var(--border-radius);
            border: none;
            background: #000;
        }

        #singleContent {
            font-size: 1.15rem;
            line-height: 1.9;
            color: var(--text-secondary);
        }

        #singleContent p {
            margin-bottom: 30px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            transition: var(--transition);
            margin-top: 35px;
            backdrop-filter: blur(10px);
            font-size: 1.05rem;
        }

        .back-button:hover {
            background: rgba(255, 71, 87, 0.15);
            border-color: var(--accent-red);
            transform: translateX(-8px);
            box-shadow: var(--shadow-sm);
        }

        .about-content, .contacts-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .about-content p, .contacts-content p {
            font-size: 1.15rem;
            line-height: 1.9;
            margin-bottom: 30px;
            color: var(--text-secondary);
        }

        .contacts-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-top: 35px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
        }

        .contact-item:hover {
            background: rgba(46, 134, 222, 0.15);
            transform: translateX(15px);
            border-color: var(--accent-blue);
        }

        .contact-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: rgba(46, 134, 222, 0.15);
            color: var(--accent-blue);
            box-shadow: var(--shadow-sm);
            flex-shrink: 0;
        }

        .contact-details h4 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-weight: 700;
        }

        .contact-details p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .legal-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .legal-content {
            background: var(--card-dark);
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: var(--shadow-lg);
            position: relative;
            animation: modalAppear 0.4s ease;
        }

        .legal-close {
            position: absolute;
            top: 25px;
            right: 25px;
            background: var(--accent-red);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: var(--transition);
            z-index: 2;
        }

        .legal-close:hover {
            transform: rotate(90deg) scale(1.1);
            background: #ff2e43;
        }

        footer {
            background: var(--secondary-dark);
            padding: 80px 40px 40px;
            margin-top: 100px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 50px;
            margin-bottom: 50px;
        }

        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 30px;
            color: var(--text-primary);
            position: relative;
            padding-bottom: 20px;
            font-weight: 800;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .footer-section p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 25px;
            font-size: 1.05rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            padding: 8px 0;
            cursor: pointer;
        }

        .footer-links a:hover {
            color: var(--accent-red);
            transform: translateX(8px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .social-link {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-secondary);
            transition: var(--transition);
            font-size: 1.3rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .social-link:hover {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-8px);
            border-color: transparent;
            box-shadow: var(--shadow-sm);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 1rem;
        }

        .loading {
            display: inline-block;
            width: 28px;
            height: 28px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent-red);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* STILI SEZIONE AI */
        .ai-section {
            background: var(--card-dark);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            margin-top: 40px;
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-lg);
        }

        .ai-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .ai-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1620712943543-bcc4688e7485?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2065&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.2;
        }

        .ai-header-content {
            position: relative;
            z-index: 2;
        }

        .ai-title {
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #e2b0ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }

        .ai-subtitle {
            font-size: clamp(1rem, 3vw, 1.4rem);
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.6;
        }

        .ai-capabilities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            padding: 40px;
            background: rgba(10, 10, 15, 0.5);
        }

        .ai-capability {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .ai-capability:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(155, 89, 182, 0.3);
        }

        .ai-capability-icon {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            background: rgba(155, 89, 182, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            font-size: 2rem;
            color: var(--accent-purple);
        }

        .ai-capability-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .ai-capability-desc {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .ai-chat-container {
            padding: 40px;
            background: rgba(17, 17, 24, 0.8);
        }

        .ai-chat-box {
            background: var(--secondary-dark);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.15);
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .ai-chat-header {
            background: var(--gradient-purple);
            padding: 25px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }

        .ai-chat-title {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 1.4rem;
            font-weight: 800;
        }

        .ai-chat-title i {
            font-size: 2rem;
            color: white;
        }

        .ai-chat-messages {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 25px;
            background: rgba(10, 10, 15, 0.6);
        }

        .ai-message {
            max-width: 85%;
            padding: 25px;
            border-radius: 25px;
            position: relative;
            line-height: 1.7;
            font-size: 1.1rem;
            animation: messageAppear 0.4s ease;
            word-wrap: break-word;
        }

        .ai-message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 8px;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .ai-message.bot {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(10px);
            border-bottom-left-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: var(--shadow-sm);
        }

        .ai-message-time {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 12px;
            text-align: right;
        }

        .ai-chat-input-container {
            padding: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            background: var(--card-dark);
        }

        .ai-chat-input-wrapper {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        #aiChatInput {
            flex: 1;
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.08);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            outline: none;
            font-size: 1.1rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        #aiChatInput:focus {
            border-color: var(--accent-purple);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 5px rgba(155, 89, 182, 0.2);
        }

        #aiChatSend {
            padding: 20px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1.1rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            white-space: nowrap;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        #aiChatSend:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .ai-examples {
            padding: 40px;
            background: rgba(26, 26, 36, 0.5);
        }

        .ai-examples-title {
            font-size: clamp(1.5rem, 4vw, 2.2rem);
            text-align: center;
            margin-bottom: 40px;
            color: var(--text-primary);
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #b19cd9);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .ai-examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
        }

        .ai-example {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .ai-example:hover {
            transform: translateY(-8px);
            background: rgba(155, 89, 182, 0.15);
            border-color: rgba(155, 89, 182, 0.3);
        }

        .ai-example-command {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-family: monospace;
            color: #e2b0ff;
            border-left: 4px solid var(--accent-purple);
        }

        .ai-example-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .ai-footer {
            padding: 40px;
            text-align: center;
            background: rgba(10, 10, 15, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-footer-text {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .ai-powered {
            margin-top: 30px;
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(45deg, #667eea, #764ba2, #ff6b9d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* MEDIA QUERIES */
        @media (max-width: 1200px) {
            .nav-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                order: 2;
                width: 100%;
                justify-content: center;
            }
            
            .nav-right {
                order: 1;
                width: 100%;
                justify-content: space-between;
            }
            
            .search-container {
                min-width: 300px;
            }
        }

        @media (max-width: 992px) {
            nav {
                padding: 15px 25px;
            }
            
            .nav-links {
                gap: 5px;
            }
            
            .nav-link {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
            
            header {
                padding: 100px 20px 60px;
                min-height: 60vh;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
            }
            
            .header-stats {
                gap: 20px;
            }
            
            .stat-item {
                min-width: 130px;
                padding: 20px 25px;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                overflow-x: auto;
                padding-bottom: 8px;
                justify-content: flex-start;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                gap: 4px;
            }
            
            .nav-links::-webkit-scrollbar {
                display: none;
            }
            
            .nav-link {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .nav-link i {
                font-size: 1rem;
            }
            
            .header-stats {
                gap: 15px;
                margin-top: 40px;
            }
            
            .stat-item {
                min-width: 100px;
                padding: 15px 15px;
            }
            
            .section-title {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .content-grid {
                gap: 25px;
            }
            
            .search-container {
                min-width: 250px;
            }
            
            .ai-chat-box {
                height: 500px;
            }
            
            .ai-chat-input-wrapper {
                flex-direction: column;
                align-items: stretch;
            }
            
            #aiChatSend {
                justify-content: center;
            }
            
            .ai-examples-grid {
                grid-template-columns: 1fr;
            }
            
            .category-header {
                flex-direction: column;
                text-align: center;
            }
            
            .category-icon {
                margin: 0 auto;
            }
            
            .contact-item {
                flex-direction: column;
                text-align: center;
            }
            
            .contact-details {
                text-align: center;
            }
        }

        @media (max-width: 576px) {
            .nav-right {
                flex-direction: column;
                gap: 15px;
                width: 100%;
            }
            
            .search-container {
                min-width: 100%;
                max-width: 100%;
            }
            
            .language-selector {
                width: 100%;
            }
            
            .language-btn {
                width: 100%;
            }
            
            .header-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stat-item {
                max-width: none;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .ai-message {
                max-width: 95%;
            }
        }
    </style>
    <!-- Webpushr -->
    <script>
    (function(w,d,s,id){
      if(typeof(w.webpushr)!=='undefined') return;
      w.webpushr=w.webpushr||function(){
        (w.webpushr.q=w.webpushr.q||[]).push(arguments)
      };
      var js,fjs=d.getElementsByTagName(s)[0];
      js=d.createElement(s); js.id=id; js.async=1;
      js.src="https://cdn.webpushr.com/app.min.js";
      js.onload=function(){
        webpushr('setup',{
          'key':'BKdp3zSvl_w5aJH_c9naFADnGMJxh9khCwh0THm4hfU-PGhMZN8V5XpQt0nAqFULqVBjWSUk6lWblBhDYRbhWt4'
        });
      };
      fjs.parentNode.appendChild(js);
    }(window,document,'script','webpushr-jssdk'));
    </script>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-overlay"></div>
        <div class="header-content">
            <h1 id="siteTitle">RSM</h1>
            <p class="tagline" id="siteTagline">Premium Multimedia Experience</p>
            <div class="header-stats">
                <div class="stat-item">
                    <div class="stat-number" id="articlesCount">0</div>
                    <div class="stat-label" id="articlesLabel">Articles</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="videosCount">0</div>
                    <div class="stat-label" id="videosLabel">Videos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="newsCount">0</div>
                    <div class="stat-label" id="newsLabel">News</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="languagesCount">9</div>
                    <div class="stat-label" id="languagesLabel">Languages</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-links">
                <a class="nav-link active" onclick="showSection('home')" id="navHome">
                    <i class="fas fa-home"></i> <span>Home</span>
                </a>
                <a class="nav-link" onclick="showSection('articles')" id="navArticles">
                    <i class="fas fa-newspaper"></i> <span>Articles</span>
                </a>
                <a class="nav-link" onclick="showSection('videos')" id="navVideos">
                    <i class="fas fa-play-circle"></i> <span>Videos</span>
                </a>
                <a class="nav-link" onclick="showSection('news')" id="navNews">
                    <i class="fas fa-bullhorn"></i> <span>News</span>
                </a>
                <a class="nav-link" onclick="showSection('categories')" id="navCategories">
                    <i class="fas fa-folder"></i> <span>Categories</span>
                </a>
                <a class="nav-link" onclick="showSection('ai')" id="navAI">
                    <i class="fas fa-robot"></i> <span>AI Assistant</span>
                </a>
                <a class="nav-link" onclick="showSection('about')" id="navAbout">
                    <i class="fas fa-info-circle"></i> <span>About Us</span>
                </a>
                <a class="nav-link" onclick="showSection('contacts')" id="navContacts">
                    <i class="fas fa-address-book"></i> <span>Contacts</span>
                </a>
            </div>

            <div class="nav-right">
                <!-- Search Box -->
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input id="searchInput" placeholder="Search articles, videos, news..." oninput="searchAll()">
                        <div id="searchResults"></div>
                    </div>
                </div>

                <!-- Language Selector -->
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">
                        <span id="currentLangFlag"></span>
                        <span id="currentLangCode">EN</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option current-lang" onclick="changeLanguage('en')">
                            <span></span> <span>English</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('it')">
                            <span></span> <span>Italiano</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('es')">
                            <span></span> <span>Espaol</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('fr')">
                            <span></span> <span>Franais</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('de')">
                            <span></span> <span>Deutsch</span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('zh')">
                            <span></span> <span></span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('ar')">
                            <span></span> <span></span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('ru')">
                            <span></span> <span></span>
                        </div>
                        <div class="language-option" onclick="changeLanguage('ur')">
                            <span></span> <span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Legal Modals -->
    <div id="privacyModal" class="legal-modal">
        <div class="legal-content">
            <button class="legal-close" onclick="closeModal('privacyModal')">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="privacyTitle">Privacy Policy</h2>
            <div id="privacyContent">
                <p>Your privacy is important to us. This Privacy Policy explains how RSM collects, uses, and protects your information.</p>
                
                <h3>Information We Collect</h3>
                <p>We collect information you provide directly, such as when you contact us or use our services. This may include:</p>
                <ul>
                    <li>Contact information (name, email address)</li>
                    <li>Usage data and preferences</li>
                    <li>Device and browser information</li>
                    <li>Content preferences and interactions</li>
                </ul>
                
                <h3>How We Use Your Information</h3>
                <p>We use the information we collect to:</p>
                <ul>
                    <li>Provide and improve our services</li>
                    <li>Personalize your experience</li>
                    <li>Communicate with you about updates</li>
                    <li>Ensure platform security</li>
                </ul>
                
                <h3>Data Protection</h3>
                <p>We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, or destruction.</p>
                
                <h3>Your Rights</h3>
                <p>You have the right to access, correct, or delete your personal information. Contact us at rsm260511@gmail.com to exercise these rights.</p>
                
                <p><strong>Last Updated:</strong> January 2025</p>
            </div>
        </div>
    </div>

    <div id="termsModal" class="legal-modal">
        <div class="legal-content">
            <button class="legal-close" onclick="closeModal('termsModal')">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="termsTitle">Terms of Service</h2>
            <div id="termsContent">
                <p>Welcome to RSM. By accessing our platform, you agree to these Terms of Service.</p>
                
                <h3>Acceptance of Terms</h3>
                <p>By accessing and using RSM, you accept and agree to be bound by these Terms of Service and our Privacy Policy.</p>
                
                <h3>User Responsibilities</h3>
                <p>You agree to:</p>
                <ul>
                    <li>Use the platform for lawful purposes only</li>
                    <li>Respect intellectual property rights</li>
                    <li>Not interfere with platform operations</li>
                    <li>Provide accurate information when required</li>
                </ul>
                
                <h3>Content Rights</h3>
                <p>All content on RSM is protected by copyright and other intellectual property laws. You may not reproduce, distribute, or create derivative works without permission.</p>
                
                <h3>Limitation of Liability</h3>
                <p>RSM is provided "as is" without warranties of any kind. We are not liable for any damages arising from your use of the platform.</p>
                
                <h3>Changes to Terms</h3>
                <p>We reserve the right to modify these terms at any time. Continued use after changes constitutes acceptance.</p>
                
                <p><strong>Effective Date:</strong> January 2025</p>
            </div>
        </div>
    </div>

    <div id="cookiesModal" class="legal-modal">
        <div class="legal-content">
            <button class="legal-close" onclick="closeModal('cookiesModal')">
                <i class="fas fa-times"></i>
            </button>
            <h2 id="cookiesTitle">Cookie Policy</h2>
            <div id="cookiesContent">
                <p>This Cookie Policy explains how RSM uses cookies and similar technologies.</p>
                
                <h3>What Are Cookies?</h3>
                <p>Cookies are small text files stored on your device when you visit websites. They help websites remember your preferences and improve your experience.</p>
                
                <h3>How We Use Cookies</h3>
                <p>We use cookies for:</p>
                <ul>
                    <li><strong>Essential Cookies:</strong> Necessary for website functionality</li>
                    <li><strong>Preference Cookies:</strong> Remember your settings and preferences</li>
                    <li><strong>Analytics Cookies:</strong> Understand how visitors use our platform</li>
                    <li><strong>Marketing Cookies:</strong> Track effectiveness of marketing campaigns</li>
                </ul>
                
                <h3>Cookie Management</h3>
                <p>You can control cookies through your browser settings. However, disabling essential cookies may affect platform functionality.</p>
                
                <h3>Third-Party Cookies</h3>
                <p>We may use third-party services that set their own cookies. These are subject to the respective privacy policies of those services.</p>
                
                <h3>Your Consent</h3>
                <p>By using RSM, you consent to our use of cookies as described in this policy.</p>
                
                <p><strong>Last Updated:</strong> January 2025</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Section -->
        <section id="home">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-star"></i>
                    <span id="featuredTitle">Featured Content</span>
                </h2>
            </div>
            
            <div class="feature-cards">
                <div class="feature-card news" onclick="openLatestNews()">
                    <div class="feature-card-header">
                        <div class="feature-card-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div>
                            <h3 class="feature-card-title" id="latestNewsTitle">Latest News</h3>
                            <p id="clickNewsText">Click to read full article</p>
                        </div>
                    </div>
                    <div class="feature-card-content">
                        <h3 id="latestTitle">Loading latest news...</h3>
                        <p id="latestNewsExcerpt"></p>
                    </div>
                </div>
                
                <div class="feature-card video" onclick="openLatestVideo()">
                    <div class="feature-card-header">
                        <div class="feature-card-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div>
                            <h3 class="feature-card-title" id="latestVideoTitleText">Latest Video</h3>
                            <p id="clickVideoText">Click to watch full video</p>
                        </div>
                    </div>
                    <div class="feature-card-content">
                        <h3 id="latestVideoTitle">Loading latest video...</h3>
                        <p id="latestVideoExcerpt"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Articles Section -->
        <section id="articles" class="hidden">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-newspaper"></i>
                    <span id="articlesSectionTitle">All Articles</span>
                </h2>
                <div class="section-count" id="articlesTotal">0 articles</div>
            </div>
            <div class="content-grid" id="articlesGrid"></div>
        </section>

        <!-- Videos Section -->
        <section id="videos" class="hidden">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-play-circle"></i>
                    <span id="videosSectionTitle">All Videos</span>
                </h2>
                <div class="section-count" id="videosTotal">0 videos</div>
            </div>
            <div class="content-grid" id="videosGrid"></div>
        </section>

        <!-- News Section -->
        <section id="news" class="hidden">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-bullhorn"></i>
                    <span id="newsSectionTitle">All News</span>
                </h2>
                <div class="section-count" id="newsTotal">0 news</div>
            </div>
            <div class="content-grid" id="newsGrid"></div>
        </section>

        <!-- Categories Section -->
        <section id="categories" class="hidden">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-folder"></i>
                    <span id="categoriesSectionTitle">Browse by Category</span>
                </h2>
            </div>
            <div class="categories-grid" id="categoriesGrid"></div>
        </section>

        <!-- AI Assistant Section -->
        <section id="ai" class="hidden">
            <div class="ai-section">
                <div class="ai-header">
                    <div class="ai-header-content">
                        <h1 class="ai-title" id="aiMainTitle">RSM AI Assistant</h1>
                        <p class="ai-subtitle" id="aiSubtitle">Your intelligent companion for exploring mysteries, analyzing content, and answering questions in 9 languages</p>
                    </div>
                </div>
                
                <div class="ai-capabilities">
                    <div class="ai-capability">
                        <div class="ai-capability-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3 class="ai-capability-title" id="aiCap1Title">Wikipedia Search</h3>
                        <p class="ai-capability-desc" id="aiCap1Desc">Search Wikipedia in multiple languages for comprehensive information on any topic.</p>
                    </div>
                    
                    <div class="ai-capability">
                        <div class="ai-capability-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3 class="ai-capability-title" id="aiCap2Title">Content Summarization</h3>
                        <p class="ai-capability-desc" id="aiCap2Desc">Get concise summaries of articles, videos, and news for quick understanding.</p>
                    </div>
                    
                    <div class="ai-capability">
                        <div class="ai-capability-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <h3 class="ai-capability-title" id="aiCap3Title">Multilingual Support</h3>
                        <p class="ai-capability-desc" id="aiCap3Desc">Communicate in 9 languages including English, Italian, Spanish, French, German, Chinese, Arabic, Russian, and Urdu.</p>
                    </div>
                    
                    <div class="ai-capability">
                        <div class="ai-capability-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3 class="ai-capability-title" id="aiCap4Title">Intelligent Analysis</h3>
                        <p class="ai-capability-desc" id="aiCap4Desc">Analyze mysteries, current affairs, and complex topics with advanced reasoning.</p>
                    </div>
                </div>
                
                <div class="ai-chat-container">
                    <div class="ai-chat-box">
                        <div class="ai-chat-header">
                            <div class="ai-chat-title">
                                <i class="fas fa-robot"></i>
                                <span id="aiChatTitle">Chat with RSM AI</span>
                            </div>
                        </div>
                        
                        <div class="ai-chat-messages" id="aiChatMessages">
                            <!-- Messages will be added here -->
                        </div>
                        
                        <div class="ai-chat-input-container">
                            <div class="ai-chat-input-wrapper">
                                <input type="text" id="aiChatInput" placeholder="Type your message here..." autocomplete="off">
                                <button id="aiChatSend">
                                    <i class="fas fa-paper-plane"></i>
                                    <span id="aiSendText">Send</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ai-examples">
                    <h2 class="ai-examples-title" id="aiExamplesTitle">Try These Examples</h2>
                    <div class="ai-examples-grid">
                        <div class="ai-example" onclick="insertExample('Search for information about artificial intelligence')">
                            <div class="ai-example-command">"Search artificial intelligence"</div>
                            <p class="ai-example-desc" id="aiEx1Desc">Search Wikipedia for AI information</p>
                        </div>
                        
                        <div class="ai-example" onclick="insertExample('What is quantum computing?')">
                            <div class="ai-example-command">"What is quantum computing?"</div>
                            <p class="ai-example-desc" id="aiEx2Desc">Get explanation of complex topics</p>
                        </div>
                        
                        <div class="ai-example" onclick="insertExample('Summarize the latest article')">
                            <div class="ai-example-command">"Summarize this article"</div>
                            <p class="ai-example-desc" id="aiEx3Desc">Get quick summary of content</p>
                        </div>
                        
                        <div class="ai-example" onclick="insertExample('Tell me about yourself')">
                            <div class="ai-example-command">"Tell me about yourself"</div>
                            <p class="ai-example-desc" id="aiEx4Desc">Learn about the AI assistant</p>
                        </div>
                    </div>
                </div>
                
                <div class="ai-footer">
                    <p class="ai-footer-text" id="aiFooterText">
                        RSM AI Assistant uses advanced natural language processing to understand and respond to your queries. 
                        It can search information, analyze content, and provide insights in 9 different languages.
                    </p>
                    <div class="ai-powered" id="aiPowered">Powered by RSM Intelligence</div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="hidden">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-info-circle"></i>
                    <span id="aboutTitle">About RSM</span>
                </h2>
                <div class="about-content">
                    <p id="aboutDescription">Loading description...</p>
                </div>
            </div>
        </section>

        <!-- Contacts Section -->
        <section id="contacts" class="hidden">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-address-book"></i>
                    <span id="contactsTitle">Get in Touch</span>
                </h2>
                <div class="contacts-content">
                    <p>We'd love to hear from you! Reach out through any of the following channels:</p>
                    
                    <div class="contacts-list">
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Phone</h4>
                                <p>+39 351 093 3272</p>
                                <small style="color: var(--text-muted);">Available Monday-Friday, 9AM-6PM CET</small>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Email</h4>
                                <p>rsm260511@gmail.com</p>
                                <small style="color: var(--text-muted);">Response within 24 hours</small>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Location</h4>
                                <p>Rovereto, Italy</p>
                                <small style="color: var(--text-muted);">Digital headquarters</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-40">
                        <h3 style="color: var(--text-primary); margin-bottom: 20px;">Business Inquiries</h3>
                        <p>For partnerships, advertising, or media inquiries, please contact us at <strong>rsm260511@gmail.com</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Single Article/Video Section -->
        <section id="single" class="hidden">
            <button class="back-button" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
                <span id="backButtonText">Back to Content</span>
            </button>
            
            <div class="card mt-40">
                <h2 id="singleTitle">Loading...</h2>
                <div id="singleMeta" class="content-item-meta" style="border: none; padding: 20px 0; margin: 25px 0;"></div>
                
                <div id="singleImage" class="media-container"></div>
                
                <div id="singleContent" style="margin-top: 35px;"></div>
                
                <button class="back-button mt-40" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                    <span id="backButtonText2">Back to Content</span>
                </button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3 id="footerPlatform">RSM Platform</h3>
                <p id="footerDescription">Leading multimedia platform delivering premium content across various topics and formats.</p>
                <div class="social-links">
                    <a href="https://www.youtube.com/@RehanAhmed-w7e" target="_blank" class="social-link" title="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="#" class="social-link" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="social-link" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-link" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="social-link" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3 id="quickLinksTitle">Quick Links</h3>
                <ul class="footer-links">
                    <li><a onclick="showSection('home')"><i class="fas fa-chevron-right"></i> <span id="footerHome">Home</span></a></li>
                    <li><a onclick="showSection('articles')"><i class="fas fa-chevron-right"></i> <span id="footerArticles">Articles</span></a></li>
                    <li><a onclick="showSection('videos')"><i class="fas fa-chevron-right"></i> <span id="footerVideos">Videos</span></a></li>
                    <li><a onclick="showSection('news')"><i class="fas fa-chevron-right"></i> <span id="footerNews">News</span></a></li>
                    <li><a onclick="showSection('categories')"><i class="fas fa-chevron-right"></i> <span id="footerCategories">Categories</span></a></li>
                    <li><a onclick="showSection('ai')"><i class="fas fa-chevron-right"></i> <span id="footerAI">AI Assistant</span></a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3 id="legalTitle">Legal</h3>
                <ul class="footer-links">
                    <li><a onclick="openModal('privacyModal')"><i class="fas fa-chevron-right"></i> <span id="footerPrivacy">Privacy Policy</span></a></li>
                    <li><a onclick="openModal('termsModal')"><i class="fas fa-chevron-right"></i> <span id="footerTerms">Terms of Service</span></a></li>
                    <li><a onclick="openModal('cookiesModal')"><i class="fas fa-chevron-right"></i> <span id="footerCookies">Cookie Policy</span></a></li>
                    <li><a onclick="showSection('contacts')"><i class="fas fa-chevron-right"></i> <span id="footerContact">Contact Us</span></a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p> 2025  <strong>RSM Multimedia Platform</strong> | <span id="footerText">All rights reserved</span></p>
            <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.7;">v3.0.0  Made with <i class="fas fa-heart" style="color: var(--accent-red);"></i> for our global community</p>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" style="position:fixed;top:0;left:0;width:100%;height:100%;background:var(--primary-dark);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;transition:opacity 0.5s ease;">
        <div class="loading" style="width:60px;height:60px;border-width:4px;"></div>
        <p style="margin-top:25px;color:var(--text-secondary);font-size:1.2rem;" id="loadingText">Loading RSM Platform...</p>
    </div>

    <script>
    // ============ GLOBAL VARIABLES ============
    let articles = [];
    let currentLanguage = localStorage.getItem('rsm_language') || 'en';
    let botLanguage = currentLanguage;
    let currentSection = 'home';
    let activeRiddle = null; // per gestire indovinelli attivi

    // ============ LANGUAGE DATA (COMPLETA PER 9 LINGUE) ============
    const languageData = {
        en: {
            name: "English",
            flag: "",
            wikipediaCode: "en",
            translations: {
                siteTitle: "RSM",
                siteTagline: "Premium Multimedia Experience",
                navHome: "Home",
                navArticles: "Articles",
                navVideos: "Videos",
                navNews: "News",
                navCategories: "Categories",
                navAI: "AI Assistant",
                navAbout: "About Us",
                navContacts: "Contacts",
                searchPlaceholder: "Search articles, videos, news...",
                chatBtnText: "AI Assistant",
                chatTitle: "RSM AI Assistant",
                sendBtnText: "Send",
                chatPlaceholder: "Type your message...",
                latestNewsTitle: "Latest News",
                clickNewsText: "Click to read full article",
                latestVideoTitleText: "Latest Video",
                clickVideoText: "Click to watch full video",
                aboutTitle: "About RSM",
                contactsTitle: "Get in Touch",
                footerText: "All rights reserved",
                publishedOn: "Published on",
                featuredTitle: "Featured Content",
                articlesSectionTitle: "All Articles",
                videosSectionTitle: "All Videos",
                newsSectionTitle: "All News",
                categoriesSectionTitle: "Browse by Category",
                backButtonText: "Back to Content",
                footerHome: "Home",
                footerArticles: "Articles",
                footerVideos: "Videos",
                footerNews: "News",
                footerCategories: "Categories",
                footerAI: "AI Assistant",
                footerPrivacy: "Privacy Policy",
                footerTerms: "Terms of Service",
                footerCookies: "Cookie Policy",
                footerContact: "Contact Us",
                newsletterTitle: "Newsletter",
                newsletterText: "Subscribe to get updates on new content and features.",
                quickLinksTitle: "Quick Links",
                legalTitle: "Legal",
                footerDescription: "Leading multimedia platform delivering premium content across various topics and formats.",
                footerPlatform: "RSM Platform",
                privacyTitle: "Privacy Policy",
                termsTitle: "Terms of Service",
                cookiesTitle: "Cookie Policy",
                subscribeText: "Subscribe",
                articlesLabel: "Articles",
                videosLabel: "Videos",
                newsLabel: "News",
                languagesLabel: "Languages",
                botHello: " **Hello! I'm your RSM AI Assistant!**\n\nI can help you with:\n\n **Search Wikipedia** - Search information in multiple languages\n **Summarize articles** - Create summaries of text content\n **Navigate RSM** - Open sections and find content\n **Answer questions** - About myself, future, and general knowledge\n **Multilingual** - 9 languages available\n\n **Try these commands:**\n 'search artificial intelligence'\n 'what is quantum computing?'\n 'summarize current article'\n 'open videos section'\n 'tell me about yourself'\n 'what's the future of AI?'",
                aiMainTitle: "RSM AI Assistant",
                aiSubtitle: "Your intelligent companion for exploring mysteries, analyzing content, and answering questions in 9 languages",
                aiCap1Title: "Wikipedia Search",
                aiCap1Desc: "Search Wikipedia in multiple languages for comprehensive information on any topic.",
                aiCap2Title: "Content Summarization",
                aiCap2Desc: "Get concise summaries of articles, videos, and news for quick understanding.",
                aiCap3Title: "Multilingual Support",
                aiCap3Desc: "Communicate in 9 languages including English, Italian, Spanish, French, German, Chinese, Arabic, Russian, and Urdu.",
                aiCap4Title: "Intelligent Analysis",
                aiCap4Desc: "Analyze mysteries, current affairs, and complex topics with advanced reasoning.",
                aiChatTitle: "Chat with RSM AI",
                aiSendText: "Send",
                aiExamplesTitle: "Try These Examples",
                aiEx1Desc: "Search Wikipedia for AI information",
                aiEx2Desc: "Get explanation of complex topics",
                aiEx3Desc: "Get quick summary of content",
                aiEx4Desc: "Learn about the AI assistant",
                aiFooterText: "RSM AI Assistant uses advanced natural language processing to understand and respond to your queries. It can search information, analyze content, and provide insights in 9 different languages.",
                aiPowered: "Powered by RSM Intelligence"
            }
        },
        it: {
            name: "Italiano",
            flag: "",
            wikipediaCode: "it",
            translations: {
                siteTitle: "RSM",
                siteTagline: "Esperienza Multimediale Premium",
                navHome: "Home",
                navArticles: "Articoli",
                navVideos: "Video",
                navNews: "Notizie",
                navCategories: "Categorie",
                navAI: "Assistente AI",
                navAbout: "Chi Siamo",
                navContacts: "Contatti",
                searchPlaceholder: "Cerca articoli, video, notizie...",
                chatBtnText: "Assistente AI",
                chatTitle: "Assistente AI RSM",
                sendBtnText: "Invia",
                chatPlaceholder: "Scrivi il tuo messaggio...",
                latestNewsTitle: "Ultime Notizie",
                clickNewsText: "Clicca per leggere l'articolo completo",
                latestVideoTitleText: "Ultimo Video",
                clickVideoText: "Clicca per guardare il video completo",
                aboutTitle: "Chi Siamo",
                contactsTitle: "Contattaci",
                footerText: "Tutti i diritti riservati",
                publishedOn: "Pubblicato il",
                featuredTitle: "Contenuti in Primo Piano",
                articlesSectionTitle: "Tutti gli Articoli",
                videosSectionTitle: "Tutti i Video",
                newsSectionTitle: "Tutte le Notizie",
                categoriesSectionTitle: "Sfoglia per Categoria",
                backButtonText: "Torna ai Contenuti",
                footerHome: "Home",
                footerArticles: "Articoli",
                footerVideos: "Video",
                footerNews: "Notizie",
                footerCategories: "Categorie",
                footerAI: "Assistente AI",
                footerPrivacy: "Privacy Policy",
                footerTerms: "Termini di Servizio",
                footerCookies: "Cookie Policy",
                footerContact: "Contattaci",
                newsletterTitle: "Newsletter",
                newsletterText: "Iscriviti per aggiornamenti su nuovi contenuti.",
                quickLinksTitle: "Link Veloci",
                legalTitle: "Legale",
                footerDescription: "Piattaforma multimediale leader che offre contenuti premium su vari argomenti e formati.",
                footerPlatform: "Piattaforma RSM",
                privacyTitle: "Privacy Policy",
                termsTitle: "Termini di Servizio",
                cookiesTitle: "Cookie Policy",
                subscribeText: "Iscriviti",
                articlesLabel: "Articoli",
                videosLabel: "Video",
                newsLabel: "Notizie",
                languagesLabel: "Lingue",
                botHello: " **Ciao! Sono il tuo Assistente AI RSM!**\n\nPosso aiutarti con:\n\n **Cerca su Wikipedia** - Cerca informazioni in pi lingue\n **Riassumi articoli** - Crea riassunti di contenuti testuali\n **Naviga RSM** - Apri sezioni e trova contenuti\n **Rispondi a domande** - Su di me, futuro e conoscenza generale\n **Multilingue** - 9 lingue disponibili\n\n **Prova questi comandi:**\n 'cerca intelligenza artificiale'\n 'cos' il quantum computing?'\n 'riassumi articolo corrente'\n 'apri sezione video'\n 'parlami di te'\n 'qual  il futuro dell'AI?'",
                aiMainTitle: "Assistente AI RSM",
                aiSubtitle: "Il tuo compagno intelligente per esplorare misteri, analizzare contenuti e rispondere a domande in 9 lingue",
                aiCap1Title: "Ricerca Wikipedia",
                aiCap1Desc: "Cerca su Wikipedia in pi lingue per informazioni complete su qualsiasi argomento.",
                aiCap2Title: "Riassunto Contenuti",
                aiCap2Desc: "Ottieni riassunti concisi di articoli, video e notizie per una rapida comprensione.",
                aiCap3Title: "Supporto Multilingue",
                aiCap3Desc: "Comunica in 9 lingue incluso inglese, italiano, spagnolo, francese, tedesco, cinese, arabo, russo e urdu.",
                aiCap4Title: "Analisi Intelligente",
                aiCap4Desc: "Analizza misteri, attualit e argomenti complessi con ragionamento avanzato.",
                aiChatTitle: "Chatta con RSM AI",
                aiSendText: "Invia",
                aiExamplesTitle: "Prova Questi Esempi",
                aiEx1Desc: "Cerca informazioni sull'AI su Wikipedia",
                aiEx2Desc: "Ottieni spiegazioni di argomenti complessi",
                aiEx3Desc: "Ottieni un rapido riassunto dei contenuti",
                aiEx4Desc: "Scopri l'assistente AI",
                aiFooterText: "L'Assistente AI RSM utilizza l'elaborazione avanzata del linguaggio naturale per comprendere e rispondere alle tue domande. Pu cercare informazioni, analizzare contenuti e fornire approfondimenti in 9 lingue diverse.",
                aiPowered: "Alimentato da RSM Intelligence"
            }
        },
        es: {
            name: "Espaol",
            flag: "",
            wikipediaCode: "es",
            translations: {
                siteTitle: "RSM",
                siteTagline: "Experiencia Multimedia Premium",
                navHome: "Inicio",
                navArticles: "Artculos",
                navVideos: "Vdeos",
                navNews: "Noticias",
                navCategories: "Categoras",
                navAI: "Asistente IA",
                navAbout: "Nosotros",
                navContacts: "Contactos",
                searchPlaceholder: "Buscar artculos, vdeos, noticias...",
                chatBtnText: "Asistente IA",
                chatTitle: "Asistente IA RSM",
                sendBtnText: "Enviar",
                chatPlaceholder: "Escribe tu mensaje...",
                latestNewsTitle: "ltimas Noticias",
                clickNewsText: "Haz clic para leer el artculo completo",
                latestVideoTitleText: "ltimo Vdeo",
                clickVideoText: "Haz clic para ver el vdeo completo",
                aboutTitle: "Sobre Nosotros",
                contactsTitle: "Contctanos",
                footerText: "Todos los derechos reservados",
                publishedOn: "Publicado el",
                featuredTitle: "Contenido Destacado",
                articlesSectionTitle: "Todos los Artculos",
                videosSectionTitle: "Todos los Vdeos",
                newsSectionTitle: "Todas las Noticias",
                categoriesSectionTitle: "Explorar por Categora",
                backButtonText: "Volver al Contenido",
                footerHome: "Inicio",
                footerArticles: "Artculos",
                footerVideos: "Vdeos",
                footerNews: "Noticias",
                footerCategories: "Categoras",
                footerAI: "Asistente IA",
                footerPrivacy: "Poltica de Privacidad",
                footerTerms: "Trminos de Servicio",
                footerCookies: "Poltica de Cookies",
                footerContact: "Contctanos",
                newsletterTitle: "Boletn",
                newsletterText: "Suscrbete para recibir actualizaciones sobre nuevo contenido.",
                quickLinksTitle: "Enlaces Rpidos",
                legalTitle: "Legal",
                footerDescription: "Plataforma multimedia lder que ofrece contenido premium sobre diversos temas y formatos.",
                footerPlatform: "Plataforma RSM",
                privacyTitle: "Poltica de Privacidad",
                termsTitle: "Trminos de Servicio",
                cookiesTitle: "Poltica de Cookies",
                subscribeText: "Suscribirse",
                articlesLabel: "Artculos",
                videosLabel: "Vdeos",
                newsLabel: "Noticias",
                languagesLabel: "Idiomas",
                botHello: " **Hola! Soy tu Asistente IA RSM!**\n\nPuedo ayudarte con:\n\n **Buscar en Wikipedia** - Buscar informacin en varios idiomas\n **Resumir artculos** - Crear resmenes de contenido textual\n **Navegar RSM** - Abrir secciones y encontrar contenido\n **Responder preguntas** - Sobre m, futuro y conocimiento general\n **Multilinge** - 9 idiomas disponibles\n\n **Prueba estos comandos:**\n 'buscar inteligencia artificial'\n 'qu es la computacin cuntica?'\n 'resumir artculo actual'\n 'abrir seccin de videos'\n 'hblame de ti'\n 'cul es el futuro de la IA?'",
                aiMainTitle: "Asistente IA RSM",
                aiSubtitle: "Tu compaero inteligente para explorar misterios, analizar contenido y responder preguntas en 9 idiomas",
                aiCap1Title: "Bsqueda en Wikipedia",
                aiCap1Desc: "Busca en Wikipedia en mltiples idiomas para obtener informacin completa sobre cualquier tema.",
                aiCap2Title: "Resumen de Contenido",
                aiCap2Desc: "Obtn resmenes concisos de artculos, vdeos y noticias para una comprensin rpida.",
                aiCap3Title: "Soporte Multilinge",
                aiCap3Desc: "Comuncate en 9 idiomas incluyendo ingls, espaol, italiano, francs, alemn, chino, rabe, ruso y urdu.",
                aiCap4Title: "Anlisis Inteligente",
                aiCap4Desc: "Analiza misterios, asuntos actuales y temas complejos con razonamiento avanzado.",
                aiChatTitle: "Chatea con RSM IA",
                aiSendText: "Enviar",
                aiExamplesTitle: "Prueba Estos Ejemplos",
                aiEx1Desc: "Buscar informacin sobre IA en Wikipedia",
                aiEx2Desc: "Obtener explicaciones de temas complejos",
                aiEx3Desc: "Obtener resumen rpido de contenido",
                aiEx4Desc: "Conocer al asistente IA",
                aiFooterText: "El Asistente IA RSM utiliza procesamiento avanzado de lenguaje natural para comprender y responder a tus consultas. Puede buscar informacin, analizar contenido y proporcionar informacin en 9 idiomas diferentes.",
                aiPowered: "Impulsado por RSM Intelligence"
            }
        },
        fr: {
            name: "Franais",
            flag: "",
            wikipediaCode: "fr",
            translations: {
                siteTitle: "RSM",
                siteTagline: "Exprience Multimdia Premium",
                navHome: "Accueil",
                navArticles: "Articles",
                navVideos: "Vidos",
                navNews: "Actualits",
                navCategories: "Catgories",
                navAI: "Assistant IA",
                navAbout: " Propos",
                navContacts: "Contacts",
                searchPlaceholder: "Rechercher articles, vidos, actualits...",
                chatBtnText: "Assistant IA",
                chatTitle: "Assistant IA RSM",
                sendBtnText: "Envoyer",
                chatPlaceholder: "Tapez votre message...",
                latestNewsTitle: "Dernires Actualits",
                clickNewsText: "Cliquez pour lire l'article complet",
                latestVideoTitleText: "Dernire Vido",
                clickVideoText: "Cliquez pour regarder la vido complte",
                aboutTitle: " Propos",
                contactsTitle: "Contactez-nous",
                footerText: "Tous droits rservs",
                publishedOn: "Publi le",
                featuredTitle: "Contenu en Vedette",
                articlesSectionTitle: "Tous les Articles",
                videosSectionTitle: "Toutes les Vidos",
                newsSectionTitle: "Toutes les Actualits",
                categoriesSectionTitle: "Parcourir par Catgorie",
                backButtonText: "Retour au Contenido",
                footerHome: "Accueil",
                footerArticles: "Articles",
                footerVideos: "Vidos",
                footerNews: "Actualits",
                footerCategories: "Catgories",
                footerAI: "Assistant IA",
                footerPrivacy: "Politique de Confidentialit",
                footerTerms: "Conditions d'Utilisation",
                footerCookies: "Politique des Cookies",
                footerContact: "Contactez-nous",
                newsletterTitle: "Newsletter",
                newsletterText: "Abonnez-vous pour recevoir des mises  jour sur le nouveau contenu.",
                quickLinksTitle: "Liens Rapides",
                legalTitle: "Lgal",
                footerDescription: "Plateforme multimdia leader offrant du contenu premium sur divers sujets et formats.",
                footerPlatform: "Plateforme RSM",
                privacyTitle: "Politique de Confidentialit",
                termsTitle: "Conditions d'Utilisation",
                cookiesTitle: "Politique des Cookies",
                subscribeText: "S'abonner",
                articlesLabel: "Articles",
                videosLabel: "Vidos",
                newsLabel: "Actualits",
                languagesLabel: "Langues",
                botHello: " **Bonjour! Je suis votre Assistant IA RSM!**\n\nJe peux vous aider avec:\n\n **Rechercher sur Wikipedia** - Rechercher des informations en plusieurs langues\n **Rsumer des articles** - Crer des rsums de contenu textuel\n **Naviguer RSM** - Ouvrir des sections et trouver du contenu\n **Rpondre aux questions** - Sur moi, l'avenir et la connaissance gnrale\n **Multilingue** - 9 langues disponibles\n\n **Essayez ces commandes:**\n 'rechercher intelligence artificielle'\n 'qu'est-ce que l'informatique quantique?'\n 'rsumer l'article actuel'\n 'ouvrir section vidos'\n 'parle-moi de toi'\n 'quel est l'avenir de l'IA?'",
                aiMainTitle: "Assistant IA RSM",
                aiSubtitle: "Votre compagnon intelligent pour explorer les mystres, analyser le contenu et rpondre aux questions en 9 langues",
                aiCap1Title: "Recherche Wikipedia",
                aiCap1Desc: "Recherchez sur Wikipedia en plusieurs langues pour des informations compltes sur n'importe quel sujet.",
                aiCap2Title: "Rsum de Contenu",
                aiCap2Desc: "Obtenez des rsums concis d'articles, vidos et actualits pour une comprhension rapide.",
                aiCap3Title: "Support Multilingue",
                aiCap3Desc: "Communiquez en 9 langues incluant anglais, franais, espagnol, italien, allemand, chinois, arabe, russe et ourdou.",
                aiCap4Title: "Analyse Intelligente",
                aiCap4Desc: "Analysez les mystres, l'actualit et les sujets complexes avec un raisonnement avanc.",
                aiChatTitle: "Discutez avec RSM IA",
                aiSendText: "Envoyer",
                aiExamplesTitle: "Essayez Ces Exemples",
                aiEx1Desc: "Rechercher des informations sur l'IA sur Wikipedia",
                aiEx2Desc: "Obtenir des explications sur des sujets complexes",
                aiEx3Desc: "Obtenir un rsum rapide du contenu",
                aiEx4Desc: "Dcouvrir l'assistant IA",
                aiFooterText: "L'Assistant IA RSM utilise le traitement avanc du langage naturel pour comprendre et rpondre  vos questions. Il peut rechercher des informations, analyser du contenu et fournir des informations en 9 langues diffrentes.",
                aiPowered: "Propuls par RSM Intelligence"
            }
        },
        de: {
            name: "Deutsch",
            flag: "",
            wikipediaCode: "de",
            translations: {
                siteTitle: "RSM",
                siteTagline: "Premium Multimedia Erlebnis",
                navHome: "Startseite",
                navArticles: "Artikel",
                navVideos: "Videos",
                navNews: "Nachrichten",
                navCategories: "Kategorien",
                navAI: "KI-Assistent",
                navAbout: "ber Uns",
                navContacts: "Kontakte",
                searchPlaceholder: "Artikel, Videos, Nachrichten suchen...",
                chatBtnText: "KI-Assistent",
                chatTitle: "RSM KI-Assistent",
                sendBtnText: "Senden",
                chatPlaceholder: "Schreiben Sie Ihre Nachricht...",
                latestNewsTitle: "Neueste Nachrichten",
                clickNewsText: "Klicken Sie, um den vollstndigen Artikel zu lesen",
                latestVideoTitleText: "Neuestes Video",
                clickVideoText: "Klicken Sie, um das vollstndige Video anzusehen",
                aboutTitle: "ber Uns",
                contactsTitle: "Kontaktieren Sie Uns",
                footerText: "Alle Rechte vorbehalten",
                publishedOn: "Verffentlicht am",
                featuredTitle: "Vorgestellte Inhalte",
                articlesSectionTitle: "Alle Artikel",
                videosSectionTitle: "Alle Videos",
                newsSectionTitle: "Alle Nachrichten",
                categoriesSectionTitle: "Nach Kategorien durchsuchen",
                backButtonText: "Zurck zu Inhalten",
                footerHome: "Startseite",
                footerArticles: "Artikel",
                footerVideos: "Videos",
                footerNews: "Nachrichten",
                footerCategories: "Kategorien",
                footerAI: "KI-Assistent",
                footerPrivacy: "Datenschutzrichtlinie",
                footerTerms: "Nutzungsbedingungen",
                footerCookies: "Cookie-Richtlinie",
                footerContact: "Kontaktieren Sie Uns",
                newsletterTitle: "Newsletter",
                newsletterText: "Abonnieren Sie Updates zu neuen Inhalten.",
                quickLinksTitle: "Schnelllinks",
                legalTitle: "Rechtliches",
                footerDescription: "Fhrende Multimedia-Plattform, die Premium-Inhalte zu verschiedenen Themen und Formaten bietet.",
                footerPlatform: "RSM Plattform",
                privacyTitle: "Datenschutzrichtlinie",
                termsTitle: "Nutzungsbedingungen",
                cookiesTitle: "Cookie-Richtlinie",
                subscribeText: "Abonnieren",
                articlesLabel: "Artikel",
                videosLabel: "Videos",
                newsLabel: "Nachrichten",
                languagesLabel: "Sprachen",
                botHello: " **Hallo! Ich bin Ihr RSM KI-Assistent!**\n\nIch kann Ihnen helfen mit:\n\n **Wikipedia durchsuchen** - Informationen in mehreren Sprachen suchen\n **Artikel zusammenfassen** - Zusammenfassungen von Textinhalten erstellen\n **RSM navigieren** - Abschnitte ffnen und Inhalte finden\n **Fragen beantworten** - ber mich, Zukunft und Allgemeinwissen\n **Mehrsprachig** - 9 Sprachen verfgbar\n\n **Probieren Sie diese Befehle:**\n 'suche knstliche Intelligenz'\n 'was ist Quantencomputing?'\n 'aktuelle Artikel zusammenfassen'\n 'Videobereich ffnen'\n 'erzhl mir von dir'\n 'was ist die Zukunft der KI?'",
                aiMainTitle: "RSM KI-Assistent",
                aiSubtitle: "Ihr intelligenter Begleiter zum Erkunden von Geheimnissen, Analysieren von Inhalten und Beantworten von Fragen in 9 Sprachen",
                aiCap1Title: "Wikipedia-Suche",
                aiCap1Desc: "Durchsuchen Sie Wikipedia in mehreren Sprachen fr umfassende Informationen zu jedem Thema.",
                aiCap2Title: "Inhaltszusammenfassung",
                aiCap2Desc: "Erhalten Sie prgnante Zusammenfassungen von Artikeln, Videos und Nachrichten fr schnelles Verstndnis.",
                aiCap3Title: "Mehrsprachige Untersttzung",
                aiCap3Desc: "Kommunizieren Sie in 9 Sprachen einschlielich Deutsch, Englisch, Franzsisch, Spanisch, Italienisch, Chinesisch, Arabisch, Russisch und Urdu.",
                aiCap4Title: "Intelligente Analyse",
                aiCap4Desc: "Analysieren Sie Geheimnisse, aktuelle Angelegenheiten und komplexe Themen mit fortschrittlicher Argumentation.",
                aiChatTitle: "Chatten Sie mit RSM KI",
                aiSendText: "Senden",
                aiExamplesTitle: "Probieren Sie Diese Beispiele",
                aiEx1Desc: "Informationen zu KI auf Wikipedia suchen",
                aiEx2Desc: "Erklrungen zu komplexen Themen erhalten",
                aiEx3Desc: "Schnelle Inhaltszusammenfassung erhalten",
                aiEx4Desc: "Den KI-Assistenten kennenlernen",
                aiFooterText: "Der RSM KI-Assistent verwendet fortschrittliche Verarbeitung natrlicher Sprache, um Ihre Anfragen zu verstehen und zu beantworten. Er kann Informationen suchen, Inhalte analysieren und Erkenntnisse in 9 verschiedenen Sprachen liefern.",
                aiPowered: "Angetrieben von RSM Intelligence"
            }
        },
        zh: {
            name: "",
            flag: "",
            wikipediaCode: "zh",
            translations: {
                siteTitle: "RSM",
                siteTagline: "",
                navHome: "",
                navArticles: "",
                navVideos: "",
                navNews: "",
                navCategories: "",
                navAI: "AI",
                navAbout: "",
                navContacts: "",
                searchPlaceholder: "...",
                chatBtnText: "AI",
                chatTitle: "RSM AI",
                sendBtnText: "",
                chatPlaceholder: "...",
                latestNewsTitle: "",
                clickNewsText: "",
                latestVideoTitleText: "",
                clickVideoText: "",
                aboutTitle: "",
                contactsTitle: "",
                footerText: "",
                publishedOn: "",
                featuredTitle: "",
                articlesSectionTitle: "",
                videosSectionTitle: "",
                newsSectionTitle: "",
                categoriesSectionTitle: "",
                backButtonText: "",
                footerHome: "",
                footerArticles: "",
                footerVideos: "",
                footerNews: "",
                footerCategories: "",
                footerAI: "AI",
                footerPrivacy: "",
                footerTerms: "",
                footerCookies: "Cookie",
                footerContact: "",
                newsletterTitle: "",
                newsletterText: "",
                quickLinksTitle: "",
                legalTitle: "",
                footerDescription: "",
                footerPlatform: "RSM",
                privacyTitle: "",
                termsTitle: "",
                cookiesTitle: "Cookie",
                subscribeText: "",
                articlesLabel: "",
                videosLabel: "",
                newsLabel: "",
                languagesLabel: "",
                botHello: " **RSM AI**\n\n\n\n **** - \n **** - \n **RSM** - \n **** - \n **** - 9\n\n ****\n ''\n ''\n ''\n ''\n ''\n 'AI'",
                aiMainTitle: "RSM AI",
                aiSubtitle: "9",
                aiCap1Title: "",
                aiCap1Desc: "",
                aiCap2Title: "",
                aiCap2Desc: "",
                aiCap3Title: "",
                aiCap3Desc: "9",
                aiCap4Title: "",
                aiCap4Desc: "",
                aiChatTitle: "RSM AI",
                aiSendText: "",
                aiExamplesTitle: "",
                aiEx1Desc: "AI",
                aiEx2Desc: "",
                aiEx3Desc: "",
                aiEx4Desc: "AI",
                aiFooterText: "RSM AI9",
                aiPowered: "RSM Intelligence"
            }
        },
        ar: {
            name: "",
            flag: "",
            wikipediaCode: "ar",
            translations: {
                siteTitle: "RSM",
                siteTagline: "   ",
                navHome: "",
                navArticles: "",
                navVideos: "",
                navNews: "",
                navCategories: "",
                navAI: "  ",
                navAbout: " ",
                navContacts: " ",
                searchPlaceholder: "    ...",
                chatBtnText: "  ",
                chatTitle: " RSM ",
                sendBtnText: "",
                chatPlaceholder: " ...",
                latestNewsTitle: " ",
                clickNewsText: "   ",
                latestVideoTitleText: " ",
                clickVideoText: "   ",
                aboutTitle: " ",
                contactsTitle: " ",
                footerText: "  ",
                publishedOn: " ",
                featuredTitle: " ",
                articlesSectionTitle: " ",
                videosSectionTitle: " ",
                newsSectionTitle: " ",
                categoriesSectionTitle: "  ",
                backButtonText: "  ",
                footerHome: "",
                footerArticles: "",
                footerVideos: "",
                footerNews: "",
                footerCategories: "",
                footerAI: "  ",
                footerPrivacy: " ",
                footerTerms: " ",
                footerCookies: " ",
                footerContact: " ",
                newsletterTitle: " ",
                newsletterText: "     .",
                quickLinksTitle: " ",
                legalTitle: "",
                footerDescription: "          .",
                footerPlatform: " RSM",
                privacyTitle: " ",
                termsTitle: " ",
                cookiesTitle: " ",
                subscribeText: "",
                articlesLabel: "",
                videosLabel: "",
                newsLabel: "",
                languagesLabel: "",
                botHello: " **!   RSM !**\n\n  :\n\n **  ** -     \n ** ** -    \n **  RSM** -     \n **  ** -    \n ** ** - 9  \n\n **  :**\n '   '\n '   '\n '  '\n '  '\n '  '\n '    '",
                aiMainTitle: " RSM ",
                aiSubtitle: "         9 ",
                aiCap1Title: " ",
                aiCap1Desc: "           .",
                aiCap2Title: " ",
                aiCap2Desc: "        .",
                aiCap3Title: "  ",
                aiCap3Desc: " 9           .",
                aiCap4Title: " ",
                aiCap4Desc: "        .",
                aiChatTitle: "  RSM ",
                aiSendText: "",
                aiExamplesTitle: "  ",
                aiEx1Desc: "      ",
                aiEx2Desc: "    ",
                aiEx3Desc: "    ",
                aiEx4Desc: "   ",
                aiFooterText: "  RSM        .         9  .",
                aiPowered: "  RSM Intelligence"
            }
        },
        ru: {
            name: "",
            flag: "",
            wikipediaCode: "ru",
            translations: {
                siteTitle: "RSM",
                siteTagline: "  ",
                navHome: "",
                navArticles: "",
                navVideos: "",
                navNews: "",
                navCategories: "",
                navAI: "-",
                navAbout: " ",
                navContacts: "",
                searchPlaceholder: " , , ...",
                chatBtnText: "-",
                chatTitle: "- RSM",
                sendBtnText: "",
                chatPlaceholder: "  ...",
                latestNewsTitle: " ",
                clickNewsText: ",    ",
                latestVideoTitleText: " ",
                clickVideoText: ",    ",
                aboutTitle: " ",
                contactsTitle: "  ",
                footerText: "  ",
                publishedOn: "",
                featuredTitle: " ",
                articlesSectionTitle: " ",
                videosSectionTitle: " ",
                newsSectionTitle: " ",
                categoriesSectionTitle: "  ",
                backButtonText: "  ",
                footerHome: "",
                footerArticles: "",
                footerVideos: "",
                footerNews: "",
                footerCategories: "",
                footerAI: "-",
                footerPrivacy: " ",
                footerTerms: " ",
                footerCookies: " Cookie",
                footerContact: "  ",
                newsletterTitle: "",
                newsletterText: "    .",
                quickLinksTitle: " ",
                legalTitle: " ",
                footerDescription: "  ,  -     .",
                footerPlatform: " RSM",
                privacyTitle: " ",
                termsTitle: " ",
                cookiesTitle: " Cookie",
                subscribeText: "",
                articlesLabel: "",
                videosLabel: "",
                newsLabel: "",
                languagesLabel: "",
                botHello: " **!   - RSM!**\n\n    :\n\n **  ** -     \n ** ** -    \n **  RSM** -     \n **  ** -  ,    \n **** -  9 \n\n **  :**\n '  '\n '   ?'\n '  '\n '  '\n '  '\n '  ?'",
                aiMainTitle: "- RSM",
                aiSubtitle: "     ,        9 ",
                aiCap1Title: "  ",
                aiCap1Desc: "            .",
                aiCap2Title: " ",
                aiCap2Desc: "   ,      .",
                aiCap3Title: " ",
                aiCap3Desc: "  9 ,  , , , , , , ,   .",
                aiCap4Title: " ",
                aiCap4Desc: " ,         .",
                aiChatTitle: "  RSM ",
                aiSendText: "",
                aiExamplesTitle: "  ",
                aiEx1Desc: "     ",
                aiEx2Desc: "   ",
                aiEx3Desc: "   ",
                aiEx4Desc: "  -",
                aiFooterText: "- RSM            .    ,       9  .",
                aiPowered: "  RSM Intelligence"
            }
        },
        ur: {
            name: "",
            flag: "",
            wikipediaCode: "ur",
            translations: {
                siteTitle: "RSM",
                siteTagline: "   ",
                navHome: "",
                navArticles: "",
                navVideos: "",
                navNews: "",
                navCategories: "",
                navAI: "AI ",
                navAbout: "  ",
                navContacts: "",
                searchPlaceholder: "    ...",
                chatBtnText: "AI ",
                chatTitle: "RSM AI ",
                sendBtnText: "",
                chatPlaceholder: "   ...",
                latestNewsTitle: "  ",
                clickNewsText: "      ",
                latestVideoTitleText: "  ",
                clickVideoText: "      ",
                aboutTitle: "  ",
                contactsTitle: "   ",
                footerText: "   ",
                publishedOn: " ",
                featuredTitle: " ",
                articlesSectionTitle: " ",
                videosSectionTitle: " ",
                newsSectionTitle: " ",
                categoriesSectionTitle: "     ",
                backButtonText: "   ",
                footerHome: "",
                footerArticles: "",
                footerVideos: "",
                footerNews: "",
                footerCategories: "",
                footerAI: "AI ",
                footerPrivacy: " ",
                footerTerms: "  ",
                footerCookies: " ",
                footerContact: "   ",
                newsletterTitle: " ",
                newsletterText: "          ",
                quickLinksTitle: " ",
                legalTitle: " ",
                footerDescription: "              ",
                footerPlatform: "RSM  ",
                privacyTitle: " ",
                termsTitle: "  ",
                cookiesTitle: " ",
                subscribeText: " ",
                articlesLabel: "",
                videosLabel: "",
                newsLabel: "",
                languagesLabel: "",
                botHello: " **!    RSM AI  !**\n\n      :\n\n **   ** -      \n **   ** -     \n **RSM  ** -      \n **   ** -       \n ** ** - 9   \n\n **   :**\n '   '\n '   '\n '    '\n '  '\n '   '\n 'AI    '",
                aiMainTitle: "RSM AI ",
                aiSubtitle: "           9        ",
                aiCap1Title: " ",
                aiCap1Desc: "             ",
                aiCap2Title: "  ",
                aiCap2Desc: "            ",
                aiCap3Title: "  ",
                aiCap3Desc: "           9     ",
                aiCap4Title: " ",
                aiCap4Desc: "              ",
                aiChatTitle: "RSM AI    ",
                aiSendText: "",
                aiExamplesTitle: "   ",
                aiEx1Desc: "  AI   ",
                aiEx2Desc: "     ",
                aiEx3Desc: "     ",
                aiEx4Desc: "AI     ",
                aiFooterText: "RSM AI                          9                    ",
                aiPowered: "RSM Intelligence    "
            }
        }
    };

    // ============ FIXED VIDEO EMBED FUNCTION ============
    function extractYouTubeID(url) {
        if (!url) return null;
        
        const patterns = [
            /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
            /^([a-zA-Z0-9_-]{11})$/
        ];
        
        for (const pattern of patterns) {
            const match = url.match(pattern);
            if (match && match[1]) {
                return match[1];
            }
        }
        
        return null;
    }

    // ============ WIKIPEDIA SEARCH FUNCTION ============
    async function wikipediaSearch(query, langCode = botLanguage) {
        try {
            const wikiLang = languageData[langCode]?.wikipediaCode || 'en';
            const searchUrl = `https://${wikiLang}.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}&format=json&origin=*&srlimit=3`;
            
            const searchResponse = await fetch(searchUrl);
            const searchData = await searchResponse.json();
            
            if (!searchData.query?.search?.length) {
                const noResults = {
                    'en': ` No results found for "${query}" on Wikipedia.`,
                    'it': ` Nessun risultato trovato per "${query}" su Wikipedia.`,
                    'es': ` No se encontraron resultados para "${query}" en Wikipedia.`,
                    'fr': ` Aucun rsultat trouv pour "${query}" sur Wikipedia.`,
                    'de': ` Keine Ergebnisse fr "${query}" auf Wikipedia gefunden.`,
                    'zh': ` "${query}"`,
                    'ar': `      "${query}"  .`,
                    'ru': `     "${query}"  .`,
                    'ur': `   "${query}"      `
                };
                return noResults[langCode] || noResults['en'];
            }
            
            let resultText = '';
            const results = searchData.query.search.slice(0, 3);
            
            for (const result of results) {
                const contentUrl = `https://${wikiLang}.wikipedia.org/w/api.php?action=query&prop=extracts&exintro=true&explaintext=true&exsentences=3&titles=${encodeURIComponent(result.title)}&format=json&origin=*`;
                
                const contentResponse = await fetch(contentUrl);
                const contentData = await contentResponse.json();
                
                const pages = contentData.query.pages;
                const pageId = Object.keys(pages)[0];
                
                if (pageId !== "-1" && pages[pageId].extract) {
                    const extract = pages[pageId].extract;
                    resultText += ` **${result.title}**\n${extract}\n\n`;
                }
            }
            
            if (resultText) {
                const moreInfo = {
                    'en': ` *For more information, visit: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'it': ` *Per maggiori informazioni, visita: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'es': ` *Para ms informacin, visita: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'fr': ` *Pour plus d'informations, visitez: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'de': ` *Weitere Informationen finden Sie unter: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'zh': ` *: https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'ar': ` *    : https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'ru': ` *    : https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`,
                    'ur': ` *     : https://${wikiLang}.wikipedia.org/wiki/${encodeURIComponent(results[0].title.replace(/ /g, '_'))}*`
                };
                
                return resultText + moreInfo[langCode];
            }
            
        } catch (error) {
            console.error('Wikipedia search error:', error);
            const errorMsg = {
                'en': " Unable to search Wikipedia at the moment. Please try again later.",
                'it': " Impossibile cercare su Wikipedia al momento. Riprova pi tardi.",
                'es': " No se puede buscar en Wikipedia en este momento. Intntalo de nuevo ms tarde.",
                'fr': " Impossible de rechercher sur Wikipdia pour le moment. Veuillez ressayer plus tard.",
                'de': " Wikipedia kann derzeit nicht durchsucht werden. Bitte versuchen Sie es spter noch einmal.",
                'zh': " ",
                'ar': "       .     .",
                'ru': "        . ,  .",
                'ur': "                "
            };
            return errorMsg[langCode] || errorMsg['en'];
        }
        
        return "No results found.";
    }

    // ============ TEXT SUMMARIZATION FUNCTION ============
    function summarizeText(text, maxSentences = 3) {
        if (!text) return '';
        
        text = text.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
        const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
        
        if (sentences.length <= maxSentences) {
            return sentences.join('. ') + '.';
        }
        
        const scoredSentences = sentences.map((sentence, index) => {
            const words = sentence.trim().split(/\s+/).length;
            const positionScore = 1 - (index / sentences.length);
            const lengthScore = Math.min(words / 20, 1);
            return { 
                sentence: sentence.trim(), 
                score: (positionScore * 0.6) + (lengthScore * 0.4) 
            };
        });
        
        scoredSentences.sort((a, b) => b.score - a.score);
        const bestSentences = scoredSentences.slice(0, maxSentences);
        bestSentences.sort((a, b) => sentences.indexOf(a.sentence) - sentences.indexOf(b.sentence));
        
        return bestSentences.map(s => s.sentence).join('. ') + '.';
    }

    // ============ API MULTILINGUALI PER IL CHAT BOT ============
    
    // Database barzellette per tutte le lingue
    const jokesDB = {
        en: [
            "Why do programmers prefer dark mode? Because light attracts bugs! ",
            "What do you call a fake noodle? An impasta! ",
            "Why don't scientists trust atoms? Because they make up everything! ",
            "What's orange and sounds like a parrot? A carrot! ",
            "Why did the scarecrow win an award? Because he was outstanding in his field! ",
            "What do you call a bear with no teeth? A gummy bear! ",
            "Why can't you give Elsa a balloon? Because she will let it go! ",
            "What do you call a sleeping bull? A bulldozer! "
        ],
        it: [
            "Perch i programmatori preferiscono la modalit scura? Perch la luce attira i bug! ",
            "Cosa dice un pollo rivolto verso l'altro? Po-uollo! ",
            "Qual  il colmo per un elettricista? Avere una moglie resistente! ",
            "Due atomi si incontrano: - Ho perso un elettrone! - Sei sicuro? - Sono positivo! ",
            "Perch gli scienziati non credono negli atomi? Perch sono fatti di teoria! ",
            "Cosa fa un pesce quando  triste? Piange! ",
            "Qual  il colmo per un calzino? Essere bucato! ",
            "Perch il libro di matematica  triste? Perch ha troppi problemi! "
        ],
        es: [
            "Por qu los programadores prefieren el modo oscuro? Porque la luz atrae a los bugs! ",
            "Cmo se llama un fideo falso? Una impasta! ",
            "Por qu los cientficos no creen en los tomos? Porque lo componen todo! ",
            "Qu est naranja y suena como un loro? Una zanahoria! ",
            "Por qu gan un premio el espantapjaros? Porque era excelente en su campo! "
        ],
        fr: [
            "Pourquoi les programmeurs prfrent-ils le mode sombre ? Parce que la lumire attire les bugs ! ",
            "Comment appelle-t-on une fausse nouille ? Une impasta ! ",
            "Pourquoi les scientifiques ne croient-ils pas aux atomes ? Parce qu'ils composent tout ! ",
            "Qu'est-ce qui est orange et ressemble  un perroquet ? Une carotte ! ",
            "Pourquoi l'pouvantail a-t-il gagn un prix ? Parce qu'il tait remarquable dans son domaine ! "
        ],
        de: [
            "Warum bevorzugen Programmierer den Dunkelmodus? Weil Licht Bugs anzieht! ",
            "Wie nennt man eine falsche Nudel? Eine Impasta! ",
            "Warum glauben Wissenschaftler nicht an Atome? Weil sie alles ausmachen! ",
            "Was ist orange und klingt wie ein Papagei? Eine Karotte! ",
            "Warum hat die Vogelscheuche einen Preis gewonnen? Weil sie herausragend auf ihrem Feld war! "
        ],
        zh: [
            "",
            "",
            "",
            "",
            ""
        ],
        ar: [
            "        ! ",
            "     ! ",
            "          ! ",
            "      ! ",
            "        ! "
        ],
        ru: [
            "    ?     ! ",
            "   ? ! ",
            "     ?     ! ",
            "     ? ! ",
            "   ?        ! "
        ],
        ur: [
            "               ! ",
            "      ! ",
            "            ! ",
            "           ! ",
            "           ! "
        ]
    };

    // Database indovinelli multilingue
    const riddlesDB = {
        en: [
            { question: "I have keys but no locks. I have space but no room. What am I?", answer: "piano", hint: "Musical instrument" },
            { question: "The more you take, the more you leave behind. What are they?", answer: "footsteps", hint: "You make them when walking" },
            { question: "What has a head and a tail but no body?", answer: "coin", hint: "You spend it" },
            { question: "What can run but never walks, has a mouth but never talks?", answer: "river", hint: "Flows" },
            { question: "What has to be broken before you can use it?", answer: "egg", hint: "Breakfast food" }
        ],
        it: [
            { question: "Ha chiavi ma non apre porte, ha spazio ma non  una stanza. Cosa sono?", answer: "pianoforte", hint: "Strumento musicale" },
            { question: "Pi ne togli, pi diventa grande. Cosa sono?", answer: "buco", hint: "Lo fai nel muro" },
            { question: "Ha testa e coda ma non ha corpo. Cosa sono?", answer: "moneta", hint: "Si usa per pagare" },
            { question: "Pu correre ma non camminare, ha una bocca ma non parlare. Cosa sono?", answer: "fiume", hint: "Scorre" },
            { question: "Cosa devi rompere prima di usarlo?", answer: "uovo", hint: "Colazione" }
        ],
        es: [
            { question: "Tengo llaves pero no cerraduras. Tengo espacio pero no habitacin. Qu soy?", answer: "piano", hint: "Instrumento musical" },
            { question: "Cuanto ms tomas, ms dejas atrs. Qu son?", answer: "huellas", hint: "Las haces al caminar" },
            { question: "Qu tiene cabeza y cola pero no cuerpo?", answer: "moneda", hint: "La gastas" }
        ],
        fr: [
            { question: "J'ai des cls mais pas de serrures. J'ai de l'espace mais pas de pice. Qui suis-je?", answer: "piano", hint: "Instrument de musique" },
            { question: "Plus tu en prends, plus tu en laisses derrire toi. Que sont-ils?", answer: "empreintes", hint: "Tu les fais en marchant" }
        ],
        de: [
            { question: "Ich habe Schlssel, aber keine Schlsser. Ich habe Platz, aber kein Zimmer. Was bin ich?", answer: "klavier", hint: "Musikinstrument" },
            { question: "Je mehr du nimmst, desto mehr lsst du zurck. Was sind sie?", answer: "fuabdrcke", hint: "Du machst sie beim Gehen" }
        ]
    };

    // Funzione per ottenere barzelletta nella lingua corrente
    function getJoke() {
        const lang = botLanguage;
        const jokes = jokesDB[lang] || jokesDB.en;
        return jokes[Math.floor(Math.random() * jokes.length)];
    }

    // Funzione per ottenere indovinello nella lingua corrente
    function getRandomRiddle() {
        const lang = botLanguage;
        const riddles = riddlesDB[lang] || riddlesDB.en;
        const riddle = riddles[Math.floor(Math.random() * riddles.length)];
        activeRiddle = riddle;
        
        const messages = {
            en: ` **Riddle:**\n\n${riddle.question}\n\n(Type your answer or ask for a 'hint')`,
            it: ` **Indovinello:**\n\n${riddle.question}\n\n(Scrivi la tua risposta o chiedi un 'suggerimento')`,
            es: ` **Adivinanza:**\n\n${riddle.question}\n\n(Escribe tu respuesta o pide una 'pista')`,
            fr: ` **Devinette:**\n\n${riddle.question}\n\n(crivez votre rponse ou demandez un 'indice')`,
            de: ` **Rtsel:**\n\n${riddle.question}\n\n(Schreibe deine Antwort oder bitte um einen 'Hinweis')`,
            zh: ` **:**\n\n${riddle.question}\n\n('')`,
            ar: ` **:**\n\n${riddle.question}\n\n(    '')`,
            ru: ` **:**\n\n${riddle.question}\n\n(     '')`,
            ur: ` **:**\n\n${riddle.question}\n\n(    '' )`
        };
        return messages[lang] || messages.en;
    }

    // Funzione per controllare risposta indovinello
    function checkRiddleAnswer(userAnswer) {
        if (!activeRiddle) return null;
        
        const lang = botLanguage;
        const normalizedUser = userAnswer.toLowerCase().trim().replace(/[!?.,]/g, '');
        const normalizedCorrect = activeRiddle.answer.toLowerCase().trim();
        
        const correctMessages = {
            en: " **Correct!** You got it! \n\nWant another riddle? Ask me 'another riddle'.",
            it: " **Esatto!** Hai indovinato! \n\nVuoi un altro indovinello? Chiedimi 'un altro indovinello'.",
            es: " **Correcto!** Lo tienes! \n\nQuieres otra adivinanza? Pdeme 'otra adivinanza'.",
            fr: " **Correct!** Vous l'avez! \n\nVous voulez une autre devinette? Demandez-moi 'une autre devinette'.",
            de: " **Richtig!** Du hast es! \n\nMchtest du ein weiteres Rtsel? Frag mich 'ein weiteres Rtsel'.",
            zh: " **** \n\n''",
            ar: " **!**   ! \n\n     ' '.",
            ru: " **!**  ! \n\n   ?   ' '.",
            ur: " **!**    ! \n\n         '  ' "
        };
        
        const wrongMessages = {
            en: " **Not correct.** Try again or ask for a hint.",
            it: " **Non  corretto.** Riprova o chiedi un suggerimento.",
            es: " **No es correcto.** Intntalo de nuevo o pide una pista.",
            fr: " **Pas correct.** Ressayez ou demandez un indice.",
            de: " **Nicht richtig.** Versuche es erneut oder bitte um einen Hinweis.",
            zh: " **** ",
            ar: " ** .**      .",
            ru: " **.**      .",
            ur: " ****      "
        };
        
        if (normalizedUser.includes(normalizedCorrect) || normalizedCorrect.includes(normalizedUser)) {
            activeRiddle = null;
            return correctMessages[lang] || correctMessages.en;
        } else {
            return wrongMessages[lang] || wrongMessages.en;
        }
    }

    // Funzione per suggerimento
    function getRiddleHint() {
        const lang = botLanguage;
        if (!activeRiddle) {
            const noRiddle = {
                en: "No active riddle. Ask me for a riddle!",
                it: "Nessun indovinello attivo. Chiedimi un indovinello!",
                es: "No hay adivinanza activa. Pdeme una adivinanza!",
                fr: "Pas de devinette active. Demandez-moi une devinette!",
                de: "Kein aktives Rtsel. Frag mich nach einem Rtsel!",
                zh: "",
                ar: "   .   !",
                ru: "  .    !",
                ur: "        !"
            };
            return noRiddle[lang] || noRiddle.en;
        }
        return ` **Hint / Suggerimento:** ${activeRiddle.hint}`;
    }

    // Funzione per calcoli
    function calculate(expression) {
        try {
            const sanitized = expression.replace(/[^0-9+\-*/()., ]/g, '').replace(/,/g, '.');
            // eslint-disable-next-line no-eval
            const result = eval(sanitized);
            if (isNaN(result) || !isFinite(result)) return "Calcolo non valido";
            
            const messages = {
                en: ` **Result:** ${result}`,
                it: ` **Risultato:** ${result}`,
                es: ` **Resultado:** ${result}`,
                fr: ` **Rsultat:** ${result}`,
                de: ` **Ergebnis:** ${result}`,
                zh: ` **:** ${result}`,
                ar: ` **:** ${result}`,
                ru: ` **:** ${result}`,
                ur: ` **:** ${result}`
            };
            return messages[botLanguage] || messages.en;
        } catch {
            const errorMsg = {
                en: "Can't calculate that. Use numbers and operators (+, -, *, /).",
                it: "Non riesco a calcolarlo. Usa numeri e operatori (+, -, *, /).",
                es: "No puedo calcularlo. Usa nmeros y operadores (+, -, *, /).",
                fr: "Impossible de calculer. Utilisez des nombres et des oprateurs (+, -, *, /).",
                de: "Kann das nicht berechnen. Verwenden Sie Zahlen und Operatoren (+, -, *, /).",
                zh: "+-*/",
                ar: "   .    (+ - * /).",
                ru: "  .     (+, -, *, /).",
                ur: "           (+ - * /)"
            };
            return errorMsg[botLanguage] || errorMsg.en;
        }
    }

    // Funzione per curiosit
    function getFunFact() {
        const facts = {
            en: [
                "Bees can recognize human faces! ",
                "A day on Venus is longer than a year on Venus. ",
                "Octopuses have three hearts. ",
                "Bananas are berries, strawberries aren't. ",
                "Polar bears are left-handed. ",
                "Clouds can weigh like an airplane. ",
                "Cats have 32 muscles in each ear. ",
                "Honey never spoils. "
            ],
            it: [
                "Le api possono riconoscere i volti umani! ",
                "Un giorno su Venere  pi lungo di un anno su Venere. ",
                "I polpi hanno tre cuori. ",
                "Le banane sono bacche, le fragole no. ",
                "Gli orsi polari sono mancini. ",
                "Le nuvole possono pesare come un aereo. ",
                "I gatti hanno 32 muscoli per ogni orecchio. ",
                "Il miele non scade mai. "
            ],
            es: [
                "Las abejas pueden reconocer rostros humanos! ",
                "Un da en Venus es ms largo que un ao en Venus. ",
                "Los pulpos tienen tres corazones. ",
                "Los pltanos son bayas, las fresas no. ",
                "Los osos polares son zurdos. ",
                "Las nubes pueden pesar como un avin. ",
                "Los gatos tienen 32 msculos en cada oreja. ",
                "La miel nunca se estropea. "
            ],
            fr: [
                "Les abeilles peuvent reconnatre les visages humains! ",
                "Un jour sur Vnus est plus long qu'une anne sur Vnus. ",
                "Les poulpes ont trois curs. ",
                "Les bananes sont des baies, les fraises non. ",
                "Les ours polaires sont gauchers. ",
                "Les nuages peuvent peser comme un avion. ",
                "Les chats ont 32 muscles dans chaque oreille. ",
                "Le miel ne se gte jamais. "
            ]
        };
        const langFacts = facts[botLanguage] || facts.en;
        return ` **Did you know? / Curiosit:**\n\n${langFacts[Math.floor(Math.random() * langFacts.length)]}`;
    }

    // ============ INTELLIGENT AI RESPONSE FUNCTION (MODIFICATA CON LE NUOVE API) ============
    async function aiBotResponse(msg) {
        const m = msg.toLowerCase().trim();
        const t = languageData[botLanguage].translations;
        
        // Saluti multilingua
        const greetings = {
            'en': ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening', 'how are you'],
            'it': ['ciao', 'salve', 'buongiorno', 'buonasera', 'come stai', 'come va'],
            'es': ['hola', 'buenos das', 'buenas tardes', 'buenas noches', 'cmo ests'],
            'fr': ['bonjour', 'salut', 'bonsoir', 'comment a va'],
            'de': ['hallo', 'guten tag', 'wie geht es dir'],
            'zh': ['', '', '', ''],
            'ar': ['', ' ', ' '],
            'ru': ['', '', ' '],
            'ur': ['', ' ', ' ']
        };
        
        const langGreetings = greetings[botLanguage] || greetings['en'];
        if (langGreetings.some(greet => m.includes(greet.toLowerCase()))) {
            const greetingResponses = {
                'en': ["Hello!  How can I help you today?", "Hi there! Ready to assist you.", "Greetings! What can I do for you?"],
                'it': ["Ciao!  Come posso aiutarti oggi?", "Salve! Pronto ad assisterti.", "Buongiorno! Cosa posso fare per te?"],
                'es': ["Hola!  Cmo puedo ayudarte hoy?", "Hola! Listo para ayudarte.", "Saludos! Qu puedo hacer por ti?"],
                'fr': ["Bonjour !  Comment puis-je vous aider aujourd'hui ?", "Salut ! Prt  vous aider.", "Bonsoir ! Que puis-je faire pour vous ?"],
                'de': ["Hallo!  Wie kann ich Ihnen heute helfen?", "Hallo! Bereit, Ihnen zu helfen.", "Guten Tag! Was kann ich fr Sie tun?"],
                'zh': [" ", "", ""],
                'ar': ["!     ", "!  .", "!      "],
                'ru': ["!       ?", "!   .", "!      "],
                'ur': ["!          ", "!      .", "!        "]
            };
            const responses = greetingResponses[botLanguage] || greetingResponses['en'];
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        // Nome del bot
        if (m.includes('come ti chiami') || m.includes('tu come ti chiami') || m.includes('qual  il tuo nome') || 
            m.includes('hai un nome') || m.includes('your name') || m.includes('what is your name') ||
            m.includes('como te llamas') || m.includes('comment tu t\'appelles') || m.includes('wie heit du') ||
            m.includes('') || m.includes(' ') || m.includes('  ') || m.includes('    ')) {
            
            const responses = {
                'en': " **My name is RSM AI Assistant!** I'm an intelligent assistant created to help you explore mysteries, current affairs, and various topics.",
                'it': " **Mi chiamo Assistente AI RSM!** Sono un assistente intelligente creato per aiutarti a esplorare misteri, attualit e vari argomenti.",
                'es': " **Mi nombre es Asistente IA RSM!** Soy un asistente inteligente creado para ayudarte a explorar misterios, actualidad y diversos temas.",
                'fr': " **Je m'appelle Assistant IA RSM !** Je suis un assistant intelligent cr pour vous aider  explorer les mystres, l'actualit et divers sujets.",
                'de': " **Mein Name ist RSM KI-Assistent!** Ich bin ein intelligenter Assistent, der Ihnen helfen soll, Mysterien, aktuelle Angelegenheiten und verschiedene Themen zu erkunden.",
                'zh': " **RSM AI** ",
                'ar': " **  RSM !**             .",
                'ru': " **  - RSM!**   , ,     ,     .",
                'ur': " **  RSM AI  !**                        "
            };
            return responses[botLanguage] || responses['en'];
        }
        
        // Cosa puoi fare
        if (m.includes('cosa puoi fare') || m.includes('what can you do') || m.includes('qu puedes hacer') || 
            m.includes('que peux-tu faire') || m.includes('was kannst du tun') || m.includes('') ||
            m.includes('   ') || m.includes('  ') || m.includes('    ')) {
            
            return t.botHello;
        }
        
        // RICHIESTE API SPECIFICHE (mantenendo Wikipedia e summarize originali)
        
        // Barzellette
        if (m.includes('barzelletta') || m.includes('joke') || m.includes('battuta') || 
            m.includes('risata') || m.includes('chiste') || m.includes('blague') || 
            m.includes('witz') || m.includes('') || m.includes('') || 
            m.includes('') || m.includes('')) {
            return getJoke();
        }
        
        // Indovinelli
        if (m.includes('indovinello') || m.includes('riddle') || m.includes('adivinanza') || 
            m.includes('devinette') || m.includes('rtsel') || m.includes('') || 
            m.includes('') || m.includes('') || m.includes('')) {
            
            if (m.includes('altro') || m.includes('another') || m.includes('otra') || 
                m.includes('encore') || m.includes('weitere') || m.includes('')) {
                return getRandomRiddle();
            }
            return getRandomRiddle();
        }
        
        // Suggerimento per indovinello
        if ((m.includes('suggerimento') || m.includes('hint') || m.includes('pista') || 
             m.includes('indice') || m.includes('hinweis') || m.includes('') || 
             m.includes('') || m.includes('') || m.includes('')) && activeRiddle) {
            return getRiddleHint();
        }
        
        // Verifica risposta indovinello (se c' un indovinello attivo)
        if (activeRiddle) {
            const result = checkRiddleAnswer(msg);
            if (result) return result;
        }
        
        // Calcoli
        if (m.match(/[0-9+\-*/().]/) && 
            (m.includes('calcola') || m.includes('calculate') || m.includes('quanto fa') || 
             m.includes('how much') || m.includes('cunto es') || m.includes('combien') || 
             m.includes('wie viel') || m.includes('') || m.includes('') || 
             m.includes('') || m.includes('') || m.includes('+') || 
             m.includes('-') || m.includes('*') || m.includes('/'))) {
            
            // Estrai espressione
            const expr = msg.replace(/[^0-9+\-*/()., ]/g, '');
            if (expr.length > 0) {
                return calculate(expr);
            }
        }
        
        // Curiosit
        if (m.includes('curiosit') || m.includes('curiosity') || m.includes('fact') || 
            m.includes('did you know') || m.includes('sapevi che') || m.includes('sabas que') || 
            m.includes('le saviez-vous') || m.includes('wusstest du') || m.includes('') || 
            m.includes(' ') || m.includes('  ') || m.includes('   ')) {
            return getFunFact();
        }
        
        // Ricerca Wikipedia (originale)
        const searchKeywords = ['search', 'cerca', 'buscar', 'rechercher', 'suchen', '', '', '', ''];
        const whatIsKeywords = ['what is', 'cos\'', 'qu es', 'qu\'est-ce que', 'was ist', '', ' ', ' ', ' '];
        const whoIsKeywords = ['who is', 'chi ', 'quin es', 'qui est', 'wer ist', '', ' ', ' ', ' '];
        
        let searchQuery = '';
        let shouldSearch = false;
        
        for (const keyword of searchKeywords) {
            if (m.includes(keyword)) {
                searchQuery = m.replace(keyword, '').trim();
                shouldSearch = true;
                break;
            }
        }
        
        for (const keyword of whatIsKeywords) {
            if (m.includes(keyword)) {
                searchQuery = m.replace(keyword, '').trim();
                shouldSearch = true;
                break;
            }
        }
        
        for (const keyword of whoIsKeywords) {
            if (m.includes(keyword)) {
                searchQuery = m.replace(keyword, '').trim();
                shouldSearch = true;
                break;
            }
        }
        
        if (m.includes('?') && !shouldSearch && m.length > 5) {
            searchQuery = m.replace(/[?.,!]/g, '').trim();
            shouldSearch = true;
        }
        
        if (shouldSearch && searchQuery.length > 2) {
            return await wikipediaSearch(searchQuery, botLanguage);
        }
        
        // Summarize (originale)
        const summarizeKeywords = {
            'en': ['summarize', 'summary', 'brief', 'overview'],
            'it': ['riassumi', 'sintetizza', 'riassunto'],
            'es': ['resume', 'resumen', 'sintetiza'],
            'fr': ['rsume', 'synthtise', 'rsum'],
            'de': ['zusammenfassen', 'zusammenfassung'],
            'zh': ['', '', ''],
            'ar': ['', '', ''],
            'ru': ['', '', ''],
            'ur': [' ', '', '']
        };
        
        const langSummarize = summarizeKeywords[botLanguage] || summarizeKeywords['en'];
        for (const keyword of langSummarize) {
            if (m.includes(keyword)) {
                if (!document.getElementById('single').classList.contains('hidden')) {
                    const articleContent = document.getElementById('singleContent').innerText;
                    if (articleContent && articleContent.length > 50) {
                        const summary = summarizeText(articleContent);
                        const responses = {
                            'en': ` **Summary:**\n\n${summary}`,
                            'it': ` **Riassunto:**\n\n${summary}`,
                            'es': ` **Resumen:**\n\n${summary}`,
                            'fr': ` **Rsum:**\n\n${summary}`,
                            'de': ` **Zusammenfassung:**\n\n${summary}`,
                            'zh': ` **:**\n\n${summary}`,
                            'ar': ` **:**\n\n${summary}`,
                            'ru': ` **:**\n\n${summary}`,
                            'ur': ` **:**\n\n${summary}`
                        };
                        return responses[botLanguage];
                    }
                }
                const noArticleMsg = {
                    'en': "To summarize an article, please open an article first or tell me which article you want summarized.",
                    'it': "Per riassumere un articolo, apri prima un articolo o dimmi quale articolo vuoi riassumere.",
                    'es': "Para resumir un artculo, abre un artculo primero o dime qu artculo quieres resumir.",
                    'fr': "Pour rsumer un article, ouvrez d'abord un article ou dites-moi quel article vous voulez rsumer.",
                    'de': "Um einen Artikel zusammenzufassen, ffnen Sie bitte zuerst einen Artikel oder sagen Sie mir, welchen Artikel Sie zusammengefasst haben mchten.",
                    'zh': "",
                    'ar': "           .",
                    'ru': "  ,     ,     .",
                    'ur': "                        "
                };
                return noArticleMsg[botLanguage];
            }
        }
        
        // Navigazione RSM (originale)
        const navigationCommands = {
            'home': {keywords: ['home', 'inicio', 'accueil', 'startseite', '', '', '', '']},
            'articles': {keywords: ['articles', 'articoli', 'artculos', 'articles', 'artikel', '', '', '', '']},
            'videos': {keywords: ['videos', 'video', 'vdeos', 'vidos', 'videos', '', '', '', '']},
            'news': {keywords: ['news', 'notizie', 'noticias', 'actualits', 'nachrichten', '', '', '', '']},
            'categories': {keywords: ['categories', 'categorie', 'categoras', 'catgories', 'kategorien', '', '', '', '']},
            'about': {keywords: ['about', 'chi siamo', 'nosotros', ' propos', 'ber uns', '', ' ', ' ', '  ']},
            'contacts': {keywords: ['contacts', 'contatti', 'contactos', 'contacts', 'kontakte', '', ' ', '', '']}
        };
        
        for (const [section, data] of Object.entries(navigationCommands)) {
            for (const keyword of data.keywords) {
                if (m.includes(keyword)) {
                    showSection(section);
                    const confirmMsg = {
                        'en': ` **${section.charAt(0).toUpperCase() + section.slice(1)} section opened!**`,
                        'it': ` **Sezione ${section} aperta!**`,
                        'es': ` **Seccin de ${section} abierta!**`,
                        'fr': ` **Section ${section} ouverte!**`,
                        'de': ` **${section.charAt(0).toUpperCase() + section.slice(1)} Bereich geffnet!**`,
                        'zh': ` **${section}**`,
                        'ar': ` **   ${section}!**`,
                        'ru': ` ** ${section} !**`,
                        'ur': ` **${section}  !**`
                    };
                    return confirmMsg[botLanguage];
                }
            }
        }
        
        // Default response (originale)
        const defaultResponses = {
            'en': [
                "I'm here to help! You can ask me to:\n Search Wikipedia\n Tell jokes\n Solve riddles\n Do calculations\n Share fun facts\n\nTry: 'tell me a joke' or 'give me a riddle'",
                "Need assistance? I can search Wikipedia, tell jokes, solve riddles, calculate, and more!",
                "I'm your AI assistant! Ask me anything - jokes, riddles, calculations, or Wikipedia searches."
            ],
            'it': [
                "Sono qui per aiutarti! Puoi chiedermi:\n Cercare su Wikipedia\n Raccontare barzellette\n Indovinelli\n Calcoli\n Curiosit\n\nProva: 'racconta una barzelletta' o 'un indovinello'",
                "Hai bisogno di aiuto? Posso cercare su Wikipedia, raccontare barzellette, indovinelli, calcoli e altro!",
                "Sono il tuo assistente AI! Chiedimi qualsiasi cosa - barzellette, indovinelli, calcoli o ricerche Wikipedia."
            ],
            'es': [
                "Estoy aqu para ayudar! Puedes pedirme:\n Buscar en Wikipedia\n Contar chistes\n Adivinanzas\n Clculos\n Curiosidades\n\nPrueba: 'cuenta un chiste' o 'una adivinanza'",
                "Necesitas ayuda? Puedo buscar en Wikipedia, contar chistes, adivinanzas, clculos y ms!",
                "Soy tu asistente IA! Pregntame cualquier cosa: chistes, adivinanzas, clculos o bsquedas en Wikipedia."
            ],
            'fr': [
                "Je suis l pour vous aider! Vous pouvez me demander:\n Rechercher sur Wikipedia\n Raconter des blagues\n Devinettes\n Calculs\n Curiosits\n\nEssayez: 'raconte une blague' ou 'une devinette'",
                "Besoin d'aide? Je peux rechercher sur Wikipedia, raconter des blagues, devinettes, calculs et plus!",
                "Je suis votre assistant IA! Demandez-moi n'importe quoi - blagues, devinettes, calculs ou recherches Wikipedia."
            ],
            'de': [
                "Ich bin hier, um zu helfen! Sie knnen mich bitten:\n Wikipedia durchsuchen\n Witze erzhlen\n Rtsel lsen\n Berechnungen\n Wissenswertes\n\nProbieren Sie: 'erzhl einen Witz' oder 'ein Rtsel'",
                "Brauchen Sie Hilfe? Ich kann Wikipedia durchsuchen, Witze erzhlen, Rtsel lsen, berechnen und mehr!",
                "Ich bin Ihr KI-Assistent! Fragen Sie mich alles - Witze, Rtsel, Berechnungen oder Wikipedia-Suchen."
            ],
            'zh': [
                "\n \n \n \n \n \n\n''''",
                "",
                "AI - "
            ],
            'ar': [
                "  !    :\n   \n  \n \n  \n  \n\n: ' '  ' '",
                "            !",
                "  !    -       ."
            ],
            'ru': [
                " ,  !    :\n   \n  \n \n \n  \n\n: ' '  ' '",
                " ?     ,  ,  ,    !",
                "  -!      - , ,     ."
            ],
            'ur': [
                "     !      :\n   \n  \n \n \n  \n\n: '   '  '   '",
                "                            !",
                "   AI  !      -      "
            ]
        };
        
        const responses = defaultResponses[botLanguage] || defaultResponses['en'];
        return responses[Math.floor(Math.random() * responses.length)];
    }

    // ============ AI SECTION FUNCTIONS ============
    function insertExample(text) {
        document.getElementById('aiChatInput').value = text;
        document.getElementById('aiChatInput').focus();
    }

    function appendAIMessage(sender, text) {
        const div = document.createElement('div');
        div.className = `ai-message ${sender}`;
        div.innerHTML = text.replace(/\n/g, '<br>');
        
        const time = document.createElement('div');
        time.className = 'ai-message-time';
        time.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        div.appendChild(time);
        document.getElementById('aiChatMessages').appendChild(div);
        document.getElementById('aiChatMessages').scrollTop = document.getElementById('aiChatMessages').scrollHeight;
    }

    async function sendAIMessage() {
        const msg = document.getElementById('aiChatInput').value.trim();
        if (!msg) return;
        
        appendAIMessage('user', msg);
        document.getElementById('aiChatInput').value = '';
        
        const typingDiv = document.createElement('div');
        typingDiv.className = 'ai-message bot';
        typingDiv.innerHTML = '<div class="loading" style="display:inline-block; width:20px;height:20px;"></div>';
        document.getElementById('aiChatMessages').appendChild(typingDiv);
        
        try {
            const response = await aiBotResponse(msg);
            typingDiv.remove();
            appendAIMessage('bot', response);
        } catch (error) {
            console.error('AI chat error:', error);
            typingDiv.remove();
            const errorMsg = {
                'en': " An error occurred. Please try again.",
                'it': " Si  verificato un errore. Riprova.",
                'es': " Ocurri un error. Intntalo de nuevo.",
                'fr': " Une erreur s'est produite. Veuillez ressayer.",
                'de': " Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.",
                'zh': " ",
                'ar': "  .    .",
                'ru': "  . ,   .",
                'ur': "         "
            };
            appendAIMessage('bot', errorMsg[botLanguage] || errorMsg['en']);
        }
        
        document.getElementById('aiChatInput').focus();
    }

    // ============ HELPER FUNCTIONS (invariate) ============
    function updateContentCounts() {
        const articlesCount = articles.filter(a => a.type === "article").length;
        const videosCount = articles.filter(a => a.type === "video").length;
        const newsCount = articles.filter(a => a.type === "news").length;
        
        document.getElementById('articlesCount').textContent = articlesCount;
        document.getElementById('videosCount').textContent = videosCount;
        document.getElementById('newsCount').textContent = newsCount;
    }

    function updateLoadingText(text) {
        const loadingText = document.getElementById('loadingText');
        if (loadingText) {
            loadingText.textContent = text;
        }
    }

    function showNotification(message) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--gradient-primary);
            color: white;
            padding: 15px 25px;
            border-radius: var(--border-radius-sm);
            z-index: 9999;
            box-shadow: var(--shadow-lg);
            animation: fadeInUp 0.3s ease;
            max-width: 300px;
            font-weight: 600;
        `;
        
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'fadeInUp 0.3s ease reverse';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    // ============ INITIALIZATION (invariata) ============
    async function initApp() {
        try {
            updateLoadingText('Loading RSM Platform...');
            
            const response = await fetch('data.json');
            if (!response.ok) throw new Error('Failed to load content');
            
            const data = await response.json();
            articles = data.articles || [];
            
            await applyLanguage(currentLanguage);
            
            document.getElementById('aboutDescription').textContent = data.description[currentLanguage] || data.description['en'];
            
            updateContentCounts();
            
            await renderAllContent();
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingOverlay').style.display = 'none';
                }, 500);
            }, 1000);
            
            setTimeout(() => {
                if (document.getElementById('aiChatMessages').children.length === 0) {
                    appendAIMessage('bot', languageData[currentLanguage].translations.botHello);
                }
            }, 1500);
            
        } catch (error) {
            console.error('Initialization error:', error);
            updateLoadingText('Error loading content. Please refresh.');
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.display = 'none';
                alert('Error loading content. Please check your connection and refresh.');
            }, 2000);
        }
    }

    // ============ LANGUAGE FUNCTIONS (invariate) ============
    function toggleLanguageDropdown() {
        const dropdown = document.getElementById('languageDropdown');
        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    }

    async function changeLanguage(langCode) {
        if (languageData[langCode]) {
            currentLanguage = langCode;
            botLanguage = langCode;
            localStorage.setItem('rsm_language', langCode);
            
            await applyLanguage(langCode);
            toggleLanguageDropdown();
            
            updateContentCounts();
            
            await renderAllContent();
            
            const aiChatMessages = document.getElementById('aiChatMessages');
            if (aiChatMessages.children.length === 1) {
                aiChatMessages.innerHTML = '';
                appendAIMessage('bot', languageData[langCode].translations.botHello);
            }
            
            showNotification(`Language changed to ${languageData[langCode].name}`);
        }
    }

    async function applyLanguage(langCode) {
        const lang = languageData[langCode];
        if (!lang) return;
        
        document.getElementById('currentLangFlag').textContent = lang.flag;
        document.getElementById('currentLangCode').textContent = langCode.toUpperCase();
        document.documentElement.lang = langCode;
        
        const t = lang.translations;
        
        const elements = {
            'siteTitle': t.siteTitle,
            'siteTagline': t.siteTagline,
            'navHome': t.navHome,
            'navArticles': t.navArticles,
            'navVideos': t.navVideos,
            'navNews': t.navNews,
            'navCategories': t.navCategories,
            'navAI': t.navAI,
            'navAbout': t.navAbout,
            'navContacts': t.navContacts,
            'latestNewsTitle': t.latestNewsTitle,
            'clickNewsText': t.clickNewsText,
            'latestVideoTitleText': t.latestVideoTitleText,
            'clickVideoText': t.clickVideoText,
            'aboutTitle': t.aboutTitle,
            'contactsTitle': t.contactsTitle,
            'footerText': t.footerText,
            'chatBtnText': t.chatBtnText,
            'chatTitle': t.chatTitle,
            'sendBtnText': t.sendBtnText,
            'featuredTitle': t.featuredTitle,
            'articlesSectionTitle': t.articlesSectionTitle,
            'videosSectionTitle': t.videosSectionTitle,
            'newsSectionTitle': t.newsSectionTitle,
            'categoriesSectionTitle': t.categoriesSectionTitle,
            'backButtonText': t.backButtonText,
            'backButtonText2': t.backButtonText,
            'footerHome': t.footerHome,
            'footerArticles': t.footerArticles,
            'footerVideos': t.footerVideos,
            'footerNews': t.footerNews,
            'footerCategories': t.footerCategories,
            'footerAI': t.footerAI,
            'footerPrivacy': t.footerPrivacy,
            'footerTerms': t.footerTerms,
            'footerCookies': t.footerCookies,
            'footerContact': t.footerContact,
            'newsletterTitle': t.newsletterTitle,
            'newsletterText': t.newsletterText,
            'quickLinksTitle': t.quickLinksTitle,
            'legalTitle': t.legalTitle,
            'footerDescription': t.footerDescription,
            'footerPlatform': t.footerPlatform,
            'privacyTitle': t.privacyTitle,
            'termsTitle': t.termsTitle,
            'cookiesTitle': t.cookiesTitle,
            'subscribeText': t.subscribeText,
            'articlesLabel': t.articlesLabel,
            'videosLabel': t.videosLabel,
            'newsLabel': t.newsLabel,
            'languagesLabel': t.languagesLabel,
            'aiMainTitle': t.aiMainTitle,
            'aiSubtitle': t.aiSubtitle,
            'aiCap1Title': t.aiCap1Title,
            'aiCap1Desc': t.aiCap1Desc,
            'aiCap2Title': t.aiCap2Title,
            'aiCap2Desc': t.aiCap2Desc,
            'aiCap3Title': t.aiCap3Title,
            'aiCap3Desc': t.aiCap3Desc,
            'aiCap4Title': t.aiCap4Title,
            'aiCap4Desc': t.aiCap4Desc,
            'aiChatTitle': t.aiChatTitle,
            'aiSendText': t.aiSendText,
            'aiExamplesTitle': t.aiExamplesTitle,
            'aiEx1Desc': t.aiEx1Desc,
            'aiEx2Desc': t.aiEx2Desc,
            'aiEx3Desc': t.aiEx3Desc,
            'aiEx4Desc': t.aiEx4Desc,
            'aiFooterText': t.aiFooterText,
            'aiPowered': t.aiPowered
        };
        
        for (const [id, text] of Object.entries(elements)) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = text;
            }
        }
        
        document.getElementById('searchInput').placeholder = t.searchPlaceholder;
        document.getElementById('aiChatInput').placeholder = t.chatPlaceholder;
        
        updateLoadingText('Loading content...');
    }

    // ============ CONTENT RENDERING (invariate) ============
    async function renderAllContent() {
        await renderHomeContent();
        await renderArticlesSection();
        await renderVideosSection();
        await renderNewsSection();
        await renderCategoriesSection();
    }

    async function renderHomeContent() {
        const newsItems = articles.filter(a => a.type === "news");
        if (newsItems.length > 0) {
            const latestNews = newsItems.sort((a, b) => new Date(b.date) - new Date(a.date))[0];
            const translation = latestNews.translations[currentLanguage] || latestNews.translations['en'];
            
            document.getElementById('latestTitle').textContent = translation.title;
            document.getElementById('latestNewsExcerpt').textContent = 
                translation.content.substring(0, 150) + '...';
            
            document.getElementById('home').querySelector('.feature-card.news').dataset.articleId = latestNews.id;
        }
        
        const videoItems = articles.filter(a => a.type === "video");
        if (videoItems.length > 0) {
            const latestVideo = videoItems.sort((a, b) => new Date(b.date) - new Date(a.date))[0];
            const translation = latestVideo.translations[currentLanguage] || latestVideo.translations['en'];
            
            document.getElementById('latestVideoTitle').textContent = translation.title;
            document.getElementById('latestVideoExcerpt').textContent = 
                translation.content.substring(0, 150) + '...';
            
            document.getElementById('home').querySelector('.feature-card.video').dataset.articleId = latestVideo.id;
        }
    }

    async function renderArticlesSection() {
        const container = document.getElementById('articlesGrid');
        const articlesItems = articles.filter(a => a.type === "article");
        
        document.getElementById('articlesTotal').textContent = `${articlesItems.length} ${languageData[currentLanguage].translations.articlesLabel.toLowerCase()}`;
        document.getElementById('articlesCount').textContent = articlesItems.length;
        
        container.innerHTML = '';
        
        for (const article of articlesItems.slice(0, 12)) {
            const translation = article.translations[currentLanguage] || article.translations['en'];
            
            const item = document.createElement('div');
            item.className = 'content-item';
            item.dataset.articleId = article.id;
            
            item.innerHTML = `
                ${article.images && article.images[0] ? `
                    <div class="content-item-image">
                        <img src="${article.images[0]}" alt="${translation.title}" loading="lazy">
                        <div class="content-item-badge">${languageData[currentLanguage].translations.articlesLabel}</div>
                    </div>
                ` : ''}
                <div class="content-item-content">
                    <h3>${translation.title}</h3>
                    <p>${translation.content.substring(0, 120)}...</p>
                    <div class="content-item-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar"></i>
                            <span>${article.date ? new Date(article.date).toLocaleDateString(currentLanguage) : languageData[currentLanguage].translations.publishedOn}</span>
                        </div>
                        <div class="meta-item">
                            <i class="far fa-folder"></i>
                            <span>${article.category || ''}</span>
                        </div>
                    </div>
                </div>
            `;
            
            item.onclick = () => openArticle(article.id);
            container.appendChild(item);
        }
    }

    async function renderVideosSection() {
        const container = document.getElementById('videosGrid');
        const videoItems = articles.filter(a => a.type === "video");
        
        document.getElementById('videosTotal').textContent = `${videoItems.length} ${languageData[currentLanguage].translations.videosLabel.toLowerCase()}`;
        document.getElementById('videosCount').textContent = videoItems.length;
        
        container.innerHTML = '';
        
        for (const video of videoItems.slice(0, 12)) {
            const translation = video.translations[currentLanguage] || video.translations['en'];
            
            const item = document.createElement('div');
            item.className = 'content-item';
            item.dataset.articleId = video.id;
            
            item.innerHTML = `
                ${video.images && video.images[0] ? `
                    <div class="content-item-image">
                        <img src="${video.images[0]}" alt="${translation.title}" loading="lazy">
                        <div class="content-item-badge">${languageData[currentLanguage].translations.videosLabel}</div>
                    </div>
                ` : ''}
                <div class="content-item-content">
                    <h3>${translation.title}</h3>
                    <p>${translation.content.substring(0, 120)}...</p>
                    <div class="content-item-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar"></i>
                            <span>${video.date ? new Date(video.date).toLocaleDateString(currentLanguage) : languageData[currentLanguage].translations.publishedOn}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-play-circle"></i>
                            <span>${languageData[currentLanguage].translations.videosLabel}</span>
                        </div>
                    </div>
                </div>
            `;
            
            item.onclick = () => openVideo(video.id);
            container.appendChild(item);
        }
    }

    async function renderNewsSection() {
        const container = document.getElementById('newsGrid');
        const newsItems = articles.filter(a => a.type === "news");
        
        document.getElementById('newsTotal').textContent = `${newsItems.length} ${languageData[currentLanguage].translations.newsLabel.toLowerCase()}`;
        document.getElementById('newsCount').textContent = newsItems.length;
        
        container.innerHTML = '';
        
        for (const news of newsItems.slice(0, 12)) {
            const translation = news.translations[currentLanguage] || news.translations['en'];
            
            const item = document.createElement('div');
            item.className = 'content-item';
            item.dataset.articleId = news.id;
            
            item.innerHTML = `
                ${news.images && news.images[0] ? `
                    <div class="content-item-image">
                        <img src="${news.images[0]}" alt="${translation.title}" loading="lazy">
                        <div class="content-item-badge">${languageData[currentLanguage].translations.newsLabel}</div>
                    </div>
                ` : ''}
                <div class="content-item-content">
                    <h3>${translation.title}</h3>
                    <p>${translation.content.substring(0, 120)}...</p>
                    <div class="content-item-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar"></i>
                            <span>${news.date ? new Date(news.date).toLocaleDateString(currentLanguage) : languageData[currentLanguage].translations.publishedOn}</span>
                        </div>
                        <div class="meta-item">
                            <i class="far fa-newspaper"></i>
                            <span>${languageData[currentLanguage].translations.newsLabel}</span>
                        </div>
                    </div>
                </div>
            `;
            
            item.onclick = () => openArticle(news.id);
            container.appendChild(item);
        }
    }

    async function renderCategoriesSection() {
        const container = document.getElementById('categoriesGrid');
        const categories = [...new Set(articles.map(a => a.category).filter(c => c))];
        
        container.innerHTML = '';
        
        for (const category of categories.slice(0, 6)) {
            const categoryArticles = articles.filter(a => a.category === category).slice(0, 5);
            
            const card = document.createElement('div');
            card.className = 'category-card';
            
            let itemsHTML = '';
            for (const article of categoryArticles) {
                const translation = article.translations[currentLanguage] || article.translations['en'];
                itemsHTML += `
                    <div class="category-item" data-article-id="${article.id}" onclick="openContent('${article.id}')">
                        <i class="fas fa-chevron-right"></i>
                        <span>${translation.title}</span>
                    </div>
                `;
            }
            
            card.innerHTML = `
                <div class="category-header">
                    <div class="category-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <h3 class="category-title">${category}</h3>
                </div>
                <div class="category-items">
                    ${itemsHTML}
                </div>
            `;
            
            container.appendChild(card);
        }
    }

    // ============ CONTENT NAVIGATION (invariate) ============
    function showSection(sectionId) {
        document.querySelectorAll('main > section').forEach(s => s.classList.add('hidden'));
        
        const section = document.getElementById(sectionId);
        if (section) {
            section.classList.remove('hidden');
        }
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        const activeLink = document.querySelector(`.nav-link[onclick*="${sectionId}"]`);
        if (activeLink) {
            activeLink.classList.add('active');
        }
        
        currentSection = sectionId;
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    async function openArticle(articleId) {
        const article = articles.find(a => a.id === articleId);
        if (!article) return;
        
        const translation = article.translations[currentLanguage] || article.translations['en'];
        
        showSection('single');
        
        document.getElementById('singleTitle').textContent = translation.title;
        
        const metaHTML = `
            <div class="meta-item">
                <i class="far fa-calendar"></i>
                <span>${article.date ? new Date(article.date).toLocaleDateString(currentLanguage) : languageData[currentLanguage].translations.publishedOn}</span>
            </div>
            <div class="meta-item">
                <i class="far fa-folder"></i>
                <span>${article.category || ''}</span>
            </div>
            <div class="meta-item">
                <i class="far fa-newspaper"></i>
                <span>${languageData[currentLanguage].translations.articlesLabel}</span>
            </div>
        `;
        document.getElementById('singleMeta').innerHTML = metaHTML;
        
        const imageContainer = document.getElementById('singleImage');
        imageContainer.innerHTML = '';
        
        if (article.images && article.images[0]) {
            const img = document.createElement('img');
            img.src = article.images[0];
            img.alt = translation.title;
            img.loading = 'lazy';
            imageContainer.appendChild(img);
        }
        
        document.getElementById('singleContent').innerHTML = 
            `<p>${translation.content.replace(/\n/g, '<br><br>')}</p>`;
    }

    async function openVideo(articleId) {
        const article = articles.find(a => a.id === articleId);
        if (!article) return;
        
        const translation = article.translations[currentLanguage] || article.translations['en'];
        
        showSection('single');
        
        document.getElementById('singleTitle').textContent = translation.title;
        
        const metaHTML = `
            <div class="meta-item">
                <i class="far fa-calendar"></i>
                <span>${article.date ? new Date(article.date).toLocaleDateString(currentLanguage) : languageData[currentLanguage].translations.publishedOn}</span>
            </div>
            <div class="meta-item">
                <i class="far fa-folder"></i>
                <span>${article.category || ''}</span>
            </div>
            <div class="meta-item">
                <i class="fas fa-play-circle"></i>
                <span>${languageData[currentLanguage].translations.videosLabel}</span>
            </div>
        `;
        document.getElementById('singleMeta').innerHTML = metaHTML;
        
        const mediaContainer = document.getElementById('singleImage');
        mediaContainer.innerHTML = '';
        
        if (article.videoUrl) {
            const videoId = extractYouTubeID(article.videoUrl);
            
            if (videoId) {
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1`;
                iframe.width = "100%";
                iframe.height = "550";
                iframe.frameBorder = "0";
                iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
                iframe.allowFullscreen = true;
                iframe.style.borderRadius = "var(--border-radius)";
                mediaContainer.appendChild(iframe);
            } else {
                const link = document.createElement('a');
                link.href = article.videoUrl;
                link.target = "_blank";
                link.style.display = "block";
                link.style.padding = "20px";
                link.style.textAlign = "center";
                link.style.color = "var(--accent-blue)";
                link.innerHTML = `
                    <i class="fas fa-external-link-alt" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <br>
                    <strong>Click to watch video</strong>
                    <br>
                    <small>${article.videoUrl}</small>
                `;
                mediaContainer.appendChild(link);
            }
        } else if (article.images && article.images[0]) {
            const img = document.createElement('img');
            img.src = article.images[0];
            img.alt = translation.title;
            img.loading = 'lazy';
            mediaContainer.appendChild(img);
        }
        
        document.getElementById('singleContent').innerHTML = 
            `<p>${translation.content.replace(/\n/g, '<br><br>')}</p>`;
    }

    // ============ GLOBAL FUNCTIONS (invariate) ============
    window.showSection = showSection;
    window.openContent = function(articleId) {
        const article = articles.find(a => a.id === articleId);
        if (!article) return;
        
        if (article.type === "video") {
            openVideo(articleId);
        } else {
            openArticle(articleId);
        }
    };
    window.openArticle = openArticle;
    window.openVideo = openVideo;
    window.openLatestNews = function() {
        const newsItems = articles.filter(a => a.type === "news");
        if (newsItems.length > 0) {
            const latestNews = newsItems.sort((a, b) => new Date(b.date) - new Date(a.date))[0];
            openArticle(latestNews.id);
        }
    };
    window.openLatestVideo = function() {
        const videoItems = articles.filter(a => a.type === "video");
        if (videoItems.length > 0) {
            const latestVideo = videoItems.sort((a, b) => new Date(b.date) - new Date(a.date))[0];
            openVideo(latestVideo.id);
        }
    };
    window.goBack = () => showSection(currentSection);
    window.insertExample = insertExample;
    window.searchAll = async function() {
        const query = document.getElementById('searchInput').value.toLowerCase().trim();
        const resultsContainer = document.getElementById('searchResults');
        
        if (!query) {
            resultsContainer.style.display = 'none';
            return;
        }
        
        const results = [];
        
        for (const article of articles) {
            const translation = article.translations[currentLanguage] || article.translations['en'];
            
            if (translation.title.toLowerCase().includes(query) || 
                translation.content.toLowerCase().includes(query)) {
                
                results.push({
                    article: article,
                    translation: translation
                });
            }
        }
        
        if (results.length > 0) {
            resultsContainer.innerHTML = '';
            
            results.slice(0, 8).forEach(result => {
                const item = document.createElement('div');
                item.className = `search-item ${result.article.type}`;
                
                const icon = result.article.type === 'video' ? 'play-circle' : 
                            result.article.type === 'news' ? 'newspaper' : 'file-alt';
                
                const typeLabel = result.article.type === 'video' ? languageData[currentLanguage].translations.videosLabel :
                                result.article.type === 'news' ? languageData[currentLanguage].translations.newsLabel :
                                languageData[currentLanguage].translations.articlesLabel;
                
                item.innerHTML = `
                    <div class="search-item-icon">
                        <i class="fas fa-${icon}"></i>
                    </div>
                    <div class="search-item-content">
                        <div class="search-item-title">${result.translation.title}</div>
                        <div class="search-item-meta">
                            <span>${typeLabel}</span>
                            <span></span>
                            <span>${result.article.category || ''}</span>
                        </div>
                    </div>
                `;
                
                item.onclick = () => {
                    if (result.article.type === "video") {
                        openVideo(result.article.id);
                    } else {
                        openArticle(result.article.id);
                    }
                    resultsContainer.style.display = 'none';
                    document.getElementById('searchInput').value = '';
                };
                
                resultsContainer.appendChild(item);
            });
            
            resultsContainer.style.display = 'block';
        } else {
            resultsContainer.style.display = 'none';
        }
    };
    window.toggleLanguageDropdown = toggleLanguageDropdown;
    window.changeLanguage = changeLanguage;
    window.openModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
    };
    window.closeModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    };

    // Initialize app
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            
            // Setup AI chat
            document.getElementById('aiChatSend').addEventListener('click', sendAIMessage);
            document.getElementById('aiChatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendAIMessage();
                }
            });
        });
    } else {
        initApp();
        
        // Setup AI chat
        document.getElementById('aiChatSend').addEventListener('click', sendAIMessage);
        document.getElementById('aiChatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendAIMessage();
            }
        });
    }
    </script>
</body>
</html>
