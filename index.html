<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>RSM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="rsm-header.png">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Montserrat',sans-serif;background:#0e0e11;color:#eaeaea;}
header{background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.9)),url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee');background-size:cover;background-position:center;padding:80px 20px;text-align:center;}
header h1{font-family:'Playfair Display',serif;font-size:52px;margin:0;}
nav{background:#15151c;padding:12px;display:flex;gap:15px;align-items:center;flex-wrap:wrap;}
nav a{cursor:pointer;font-weight:600;}
#searchBox{margin-left:auto;position:relative;}
#searchInput{padding:8px 10px;border-radius:20px;border:none;width:220px;}
#searchResults{position:absolute;top:38px;background:#1c1c25;width:100%;border-radius:10px;display:none;z-index:10;}
.search-item{padding:10px;cursor:pointer;}
.search-item:hover{background:#2a2a35;}
main{max-width:900px;margin:auto;padding:20px;}
.card{background:#1c1c25;padding:20px;border-radius:10px;margin-bottom:20px;}
.hidden{display:none}
#single img, #single iframe{max-width:100%;height:auto;object-fit:cover;border-radius:10px;margin:15px 0;}
#singleContent{line-height:1.7;}
#chatBox{display:none;position:fixed;bottom:20px;right:20px;width:350px;height=500px;background:#1c1c25;border-radius:10px;box-shadow:0 10px 25px rgba(0,0,0,0.4);overflow:hidden;flex-direction:column;z-index:1000;}
#chatMessages{flex-grow:1;padding:10px;overflow-y:auto;}
#chatInput{flex-grow:1;padding:10px;border:none;background:#0e0e11;color:#fff;outline:none;}
#chatSend{padding:0 15px;border:none;background:#ff4d4d;color:#fff;cursor:pointer;font-weight:600;}
</style>

<!-- Webpushr -->
<script>
(function(w,d,s,id){
  if(typeof(w.webpushr)!=='undefined') return;
  w.webpushr=w.webpushr||function(){
    (w.webpushr.q=w.webpushr.q||[]).push(arguments)
  };
  var js,fjs=d.getElementsByTagName(s)[0];
  js=d.createElement(s); js.id=id; js.async=1;
  js.src="https://cdn.webpushr.com/app.min.js";
  js.onload=function(){
    webpushr('setup',{
      'key':'BKdp3zSvl_w5aJH_c9naFADnGMJxh9khCwh0THm4hfU-PGhMZN8V5XpQt0nAqFULqVBjWSUk6lWblBhDYRbhWt4'
    });
  };
  fjs.parentNode.appendChild(js);
}(window,document,'script','webpushr-jssdk'));
</script>
</head>

<body>
<header>
  <h1>RSM</h1>
</header>

<nav>
  <a onclick="showSection('home')">Home</a>
  <a onclick="showSection('articles')">Articoli</a>
  <a onclick="showSection('videos')">Video</a>
  <a onclick="showSection('news')">News</a>
  <a onclick="showSection('categories')">Categorie</a>
  <a onclick="showSection('about')">Chi siamo?</a>
  <a onclick="showSection('contacts')">Contatti</a>

  <div id="searchBox">
    <input id="searchInput" placeholder="Cerca..." oninput="searchAll()">
    <div id="searchResults"></div>
  </div>

  <!-- Chatbot AI -->
  <div id="chatBotContainer" style="position:relative;margin-left:15px;">
    <button id="chatToggle" style="padding:8px 12px;border:none;border-radius:20px;background:#ff4d4d;color:#fff;cursor:pointer;">
      Chat AI
    </button>
<div id="chatBox">
  <button id="chatClose" style="padding:5px 10px;margin:5px;background:#ff4d4d;color:#fff;border:none;border-radius:10px;cursor:pointer;">Chiudi AI</button>
  <div id="chatMessages"></div>
  <div style="display:flex;border-top:1px solid #333;">
    <input id="chatInput" type="text" placeholder="Scrivi qui..." autocomplete="off">
    <button id="chatSend">Invia</button>
      </div>
    </div>
  </div>
</nav>

<main>
<section id="home">
  <div id="latestNews" class="card" style="border-left:5px solid #ff4d4d">
    <h2>ðŸŸ¥ Ultima notizia</h2>
    <h3 id="latestTitle"></h3>
    <p style="opacity:.7">Clicca per leggere la notizia completa</p>
  </div>
  <div id="latestVideo" class="card" style="border-left:5px solid #4da6ff">
    <h2>ðŸŽ¬ Ultimo video</h2>
    <h3 id="latestVideoTitle"></h3>
    <p style="opacity:.7">Clicca per guardare il video completo</p>
  </div>
</section>

<section id="articles" class="hidden"></section>
<section id="videos" class="hidden"></section>
<section id="news" class="hidden"></section>
<section id="categories" class="hidden"></section>

<section id="about" class="hidden">
  <div class="card">
    <h2>Chi siamo?</h2>
    <p id="publicDescription"></p>
  </div>
</section>

<section id="contacts" class="hidden">
  <div class="card">
    <h2>Contatti</h2>
    <p>ðŸ“ž +39 351 093 3272</p>
    <p>ðŸ“§ rsm260511@gmail.com</p>
  </div>
</section>

<section id="single" class="hidden card">
  <h2 id="singleTitle"></h2>
  <p id="singleDate" style="opacity:.6;font-size:14px;margin-top:-10px"></p>
  <div id="singleImage"></div>
  <div id="singleContent"></div>
</section>
</main>

<footer style="text-align:center;padding:20px;font-size:14px;opacity:.6">
Â© 2025 â€“ RSM | Tutti i diritti riservati
</footer>
<script>
// DATI
let articles=[];
fetch('https://raw.githubusercontent.com/rsm260511-web/RSM/main/data.json')
.then(r=>r.json())
.then(data=>{
  document.getElementById('publicDescription').innerText=data.description;
  articles = data.articles;
  renderArticles();
  renderVideos();
  renderNews();
  renderCategories();
  renderLatestNews();
  renderLatestVideo();
});

// SEZIONI
function showSection(id){
  document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  window.scrollTo(0,0);
}

// RENDER ARTICOLI, VIDEO, NEWS, CATEGORIE
function renderArticles() {
    const c = document.getElementById('articles');
    c.innerHTML = '';
    articles.filter(a => a.type === "article").forEach(a => {
        const i = articles.indexOf(a);
        const d = document.createElement('div');
        d.className = 'card';
        d.innerHTML = `<h2>${a.title}</h2>`;
        d.onclick = () => openArticle(i);
        c.appendChild(d);
    });
}

function renderVideos() {
    const c = document.getElementById('videos');
    c.innerHTML = '';
    articles.filter(a => a.type === "video").forEach(a => {
        const i = articles.indexOf(a);
        const d = document.createElement('div');
        d.className = 'card';
        d.innerHTML = `<h2>${a.title}</h2>`;
        d.onclick = () => openVideo(i);
        c.appendChild(d);
    });
}

function renderNews() {
    const c = document.getElementById('news');
    c.innerHTML = '';
    articles.filter(a => a.type === "news").forEach(a => {
        const i = articles.indexOf(a);
        const d = document.createElement('div');
        d.className = 'card';
        d.innerHTML = `<h2>${a.title}</h2>`;
        d.onclick = () => openArticle(i);
        c.appendChild(d);
    });
}

function renderCategories() {
    const c = document.getElementById('categories');
    c.innerHTML = '';
    [...new Set(articles.map(a => a.category))].forEach(cat => {
        const box = document.createElement('div');
        box.className = 'card';
        box.innerHTML = `<h2>${cat}</h2>`;
        articles.filter(a => a.category === cat).forEach(a => {
            const i = articles.indexOf(a);
            const p = document.createElement('p');
            p.style.cursor = 'pointer';
            p.innerText = "â€¢ " + a.title;
            // âœ… apertura corretta per articoli o video
            p.onclick = () => {
                if (a.type === "video") {
                    openVideo(i);
                } else {
                    openArticle(i);
                }
            };
            box.appendChild(p);
        });
        c.appendChild(box);
    });
  }
// OPEN ARTICOLI/VIDEO
function openArticle(i){const a=articles[i]; showSection('single'); document.getElementById('singleTitle').innerText=a.title; document.getElementById('singleDate').innerText=a.date?("ðŸ“… Pubblicato il "+new Date(a.date).toLocaleDateString('it-IT')):""; const imgBox=document.getElementById('singleImage'); imgBox.innerHTML=''; if(a.images && Array.isArray(a.images)){ a.images.forEach(src=>{const img=document.createElement('img'); img.src=src; imgBox.appendChild(img);}); } else if(a.image){imgBox.innerHTML=`<img src="${a.image}">`; } document.getElementById('singleContent').innerHTML=`<p>${a.content.replace(/\n/g,"<br><br>")}</p>`;}
function openVideo(i){const a=articles[i]; showSection('single'); document.getElementById('singleTitle').innerText=a.title; document.getElementById('singleDate').innerText=a.date?("ðŸ“… Pubblicato il "+new Date(a.date).toLocaleDateString('it-IT')):""; const imgBox=document.getElementById('singleImage'); imgBox.innerHTML=''; if(a.videoUrl){ imgBox.innerHTML=`<iframe width="100%" height="600" src="${a.videoUrl}" frameborder="0" allowfullscreen></iframe>`;} else if(a.images && Array.isArray(a.images)){ a.images.forEach(src=>{const img=document.createElement('img'); img.src=src; imgBox.appendChild(img);}); } document.getElementById('singleContent').innerHTML=`<p>${a.content.replace(/\n/g,"<br><br>")}</p>`;}

// SEARCH
function searchAll(){const q=searchInput.value.toLowerCase(); const box=searchResults; box.innerHTML=''; if(!q){box.style.display='none'; return;} articles.forEach((a,i)=>{if(a.title.toLowerCase().includes(q) || a.content.toLowerCase().includes(q)){const d=document.createElement('div'); d.className='search-item'; d.innerText=a.title; d.onclick=()=>openArticle(i); box.appendChild(d);}}); box.style.display=box.children.length?'block':'none';}

// LATEST NEWS & VIDEO
function renderLatestNews(){const news=articles.filter(a=>a.type==="news").sort((a,b)=>new Date(b.date)-new Date(a.date))[0]; if(!news) return; document.getElementById('latestTitle').innerText=news.title; const i=articles.findIndex(a=>a.title===news.title); document.getElementById('latestNews').onclick=()=>openArticle(i);}
function renderLatestVideo(){const video=articles.filter(a=>a.type==="video").sort((a,b)=>new Date(b.date)-new Date(a.date))[0]; if(!video) return; document.getElementById('latestVideoTitle').innerText=video.title; const i=articles.findIndex(a=>a.title===video.title); document.getElementById('latestVideo').onclick=()=>openVideo(i);}

// CHATBOT AI
const chatToggle=document.getElementById('chatToggle');
const chatBox=document.getElementById('chatBox');
const chatMessages=document.getElementById('chatMessages');
const chatInput=document.getElementById('chatInput');
const chatSend=document.getElementById('chatSend');

let lastQuestion = null; // traccia domanda per SÃŒ/NO

// Apri/Chiudi chat
chatToggle.addEventListener('click',()=>{chatBox.style.display=chatBox.style.display==='flex'?'none':'flex';});
const chatClose = document.getElementById('chatClose');

chatClose.addEventListener('click', () => {
  chatBox.style.display = 'none';
});
// Aggiungi messaggio
function appendMessage(sender,text){
  const div=document.createElement('div');
  div.textContent=text;
  div.style.margin='5px';
  div.style.padding='8px 12px';
  div.style.borderRadius='15px';
  div.style.maxWidth='80%';
  div.style.wordWrap='break-word';
  div.style.alignSelf=sender==='user'?'flex-end':'flex-start';
  div.style.background=sender==='user'?'#007bff':'#333';
  div.style.color='#fff';
  chatMessages.appendChild(div);
  chatMessages.scrollTop=chatMessages.scrollHeight;
}

// Invio messaggio
function sendMessage(){
  const msg=chatInput.value.trim();
  if(!msg) return;
  appendMessage('user',msg);
  appendMessage('bot',botResponse(msg));
  chatInput.value='';
}
chatSend.addEventListener('click',sendMessage);
chatInput.addEventListener('keypress',e=>{if(e.key==='Enter') sendMessage();});

// Funzione per risposte casuali da array
function randomChoice(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

// BOT RESPONSES ESTESA (VERSIONE NUOVA CORRETTA)
function botResponse(msg) {
  const m = msg.toLowerCase();

    // SALUTI INIZIALI
  const saluti = ["ciao", "buongiorno", "buon giorno", "buonasera", "buona sera", "buon pomeriggio", "buonpomeriggio", "hi", "hello", "salve", "hey"];
  
  if (saluti.some(saluto => m === saluto || m.includes(saluto + " "))) {
    return "Ciao! Come posso assisterti oggi?";
  }

   // DOMANDE FREQUENTI ALLE IA - AGGIUNTE NUOVE
  const domandeIA = [
    // Informazioni generali sull'IA
    {q: ["cosa sei", "chi sei", "che cosa sei", "tu chi sei", "sei un ai", "sei un'intelligenza artificiale"], 
     r: "Sono un assistente AI integrato nel sito RSM. Sono qui per aiutarti a navigare e trovare i contenuti che cerchi!"},
    
    {q: ["come funzioni", "come funziona", "come lavori", "come operi", "su cosa sei basato"], 
     r: "Funziono attraverso algoritmi che analizzano le tue domande e forniscono risposte utili per navigare nel sito RSM."},
    
    {q: ["chi ti ha creato", "chi ti ha programmato", "chi Ã¨ il tuo creatore", "chi ti ha sviluppato"], 
     r: "Sono stato sviluppato per assistere gli utenti del sito RSM nella navigazione e nella ricerca dei contenuti."},
    
    {q: ["quanto sei intelligente", "quanto sei smart", "quanto sei avanzato", "sei intelligente"], 
     r: "Sono progettato per aiutarti specificamente con le funzionalitÃ  del sito RSM. Per tutto il resto, farÃ² del mio meglio!"},
    
    // CapacitÃ  e limiti
    {q: ["cosa puoi fare", "cosa sai fare", "quali sono le tue capacitÃ ", "come puoi aiutarmi"], 
     r: "Posso aiutarti a: navigare tra le sezioni del sito, cercare contenuti, aprire articoli/video/news, riassumere testi e rispondere alle tue domande sul sito!"},
    
    {q: ["hai limiti", "cosa non puoi fare", "hai delle limitazioni", "non puoi fare"], 
     r: "Sono specializzato nell'assistenza per il sito RSM. Non posso accedere a internet esterno, fare ricerche esterne o eseguire azioni al di fuori del sito."},
    
    {q: ["impari dalle conversazioni", "ti migliori", "impari dai dialoghi", "migliori nel tempo"], 
     r: "Attualmente mantengo le stesse capacitÃ . Sono progettato per fornire assistenza costante e affidabile sul sito RSM."},
    
    // Domande tecniche
    {q: ["usare l'api", "hai api", "interfaccia di programmazione", "api key"], 
     r: "Sono integrato direttamente nel sito RSM. Per informazioni tecniche specifiche, contatta gli sviluppatori tramite la sezione Contatti."},
    
    {q: ["openai", "chatgpt", "gpt", "dall-e", "midjourney", "stable diffusion", "claude", "gemini"], 
     r: "Sono un assistente dedicato al sito RSM. Per domande su altre piattaforme AI, ti consiglio di consultare le rispettive risorse ufficiali."},
    
    {q: ["linguaggio di programmazione", "in che linguaggio sei scritto", "javascript", "python", "html"], 
     r: "Sono implementato in JavaScript e integrato direttamente nel sito web RSM per fornirti assistenza immediata."},
    
    // Domande esistenziali/filosofiche (tipiche alle IA)
    {q: ["hai coscienza", "sei consapevole", "hai sentimenti", "provi emozioni", "hai un'anima"], 
     r: "Sono un programma informatico creato per assisterti. Non ho coscienza, sentimenti o emozioni, ma sono qui per aiutarti al meglio delle mie capacitÃ !"},
    
    {q: ["hai un nome", "come ti chiami", "qual Ã¨ il tuo nome"], 
     r: "Sono l'assistente AI di RSM. Puoi chiamarmi semplicemente 'assistente RSM'!"},
    
    {q: ["dove vivi", "dove risiedi", "dove abiti", "sei nel cloud"], 
     r: "Sono integrato nel sito RSM e funziono direttamente nel tuo browser quando visiti il sito."},
    
    // Domande sul futuro dell'IA
    {q: ["il futuro dell'ia", "ia nel futuro", "come evolverÃ  l'ia", "ia tra 10 anni"], 
     r: "L'IA sta evolvendo rapidamente! Per informazioni aggiornate sull'IA, ti consiglio di consultare articoli specializzati nella sezione Articoli di RSM."},
    
    {q: ["ia pericolosa", "ia Ã¨ pericolosa", "rischi dell'ia", "ia ci sostituirÃ "], 
     r: "L'IA Ã¨ uno strumento. Dipende da come viene utilizzata. Nel contesto di RSM, sono qui per assisterti e migliorare la tua esperienza sul sito!"},
    
    // Domande divertenti/curiose
    {q: ["raccontami una barzelletta", "fai una battuta", "dimmi qualcosa di divertente", "scherza"], 
     r: "PerchÃ© i computer non vanno mai in vacanza? PerchÃ© hanno troppi byte da lavorare! ðŸ˜„ Comunque, sono qui seriamente per aiutarti con RSM!"},

     {q: ["quando Ã¨ scoppiata la seconda guerra mondiale", "inizio seconda guerra mondiale", "data seconda guerra mondiale"], 
     r: "âš”ï¸ La Seconda Guerra Mondiale Ã¨ scoppiata il **1 settembre 1939** con l'invasione tedesca della Polonia."},
    
    {q: ["quando Ã¨ finita la seconda guerra mondiale", "fine seconda guerra mondiale", "data fine seconda guerra"], 
     r: "ðŸ•Šï¸ La Seconda Guerra Mondiale Ã¨ terminata ufficialmente il **2 settembre 1945** con la resa del Giappone."},
    
    {q: ["rivoluzione francese quando", "data rivoluzione francese", "quando Ã¨ iniziata la rivoluzione francese"], 
     r: "ðŸ‡«ðŸ‡· La Rivoluzione Francese Ã¨ iniziata il **14 luglio 1789** con la Presa della Bastiglia."},
    
    {q: ["caduta muro di berlino quando", "quando Ã¨ caduto il muro di berlino", "data caduta muro berlino"], 
     r: "ðŸ§± Il Muro di Berlino Ã¨ caduto il **9 novembre 1989**."},
    
    {q: ["scoperta dell'america quando", "colombo quando scopri l'america", "1492 scoperta america"], 
     r: "â›µ Cristoforo Colombo scoprÃ¬ l'America il **12 ottobre 1492**, arrivando sull'isola di Guanahani."},
    
    // STORIA - PERSONAGGI
    {q: ["chi Ã¨ stato il primo presidente degli usa", "primo presidente stati uniti"], 
     r: "ðŸ‡ºðŸ‡¸ Il primo Presidente degli Stati Uniti fu **George Washington** (1789-1797)."},
    
    {q: ["chi ha scritto la divina commedia", "autore divina commedia"], 
     r: "ðŸ“œ La Divina Commedia Ã¨ stata scritta da **Dante Alighieri** tra il 1304 e il 1321."},
    
    {q: ["chi ha dipinto la monna lisa", "autore gioconda", "chi ha fatto la gioconda"], 
     r: "ðŸŽ¨ La Monna Lisa (Gioconda) Ã¨ stata dipinta da **Leonardo da Vinci** tra il 1503 e il 1506."},
    
    {q: ["chi ha inventato la lampadina", "inventore lampadina"], 
     r: "ðŸ’¡ La lampadina elettrica Ã¨ stata inventata da **Thomas Edison** nel 1879, sebbene precedenti prototipi esistessero."},
    
    {q: ["chi Ã¨ stato il primo uomo sulla luna", "primo uomo sulla luna", "armstrong"], 
     r: "ðŸŒ• Il primo uomo sulla Luna fu **Neil Armstrong** il **20 luglio 1969** con la missione Apollo 11."},
    
    // SCIENZA - FISICA E CHIMICA
    {q: ["chi ha formulato la teoria della relativitÃ ", "teoria relativitÃ  chi"], 
     r: "âš›ï¸ La Teoria della RelativitÃ  Ã¨ stata formulata da **Albert Einstein** (RelativitÃ  Ristretta 1905, Generale 1915)."},
    
    {q: ["chi ha scoperto la penicillina", "scopritore penicillina"], 
     r: "ðŸ’Š La penicillina Ã¨ stata scoperta da **Alexander Fleming** nel 1928."},
    
    {q: ["chi ha scoperto i raggi x", "scopritore raggi x"], 
     r: "ðŸ©» I raggi X sono stati scoperti da **Wilhelm RÃ¶ntgen** nel 1895."},
    
    {q: ["chi ha scoperto la struttura del dna", "scopritori dna", "watson e crick"], 
     r: "ðŸ§¬ La struttura a doppia elica del DNA Ã¨ stata scoperta da **James Watson e Francis Crick** nel 1953."},
    
    {q: ["chi ha inventato il telefono", "inventore telefono"], 
     r: "ðŸ“ž Il telefono Ã¨ stato inventato da **Antonio Meucci** (primo prototipo 1854), anche se il brevetto Ã¨ di Alexander Graham Bell (1876)."},
    
    // GEOGRAFIA - CAPITALI
    {q: ["capitale della francia", "francia capitale"], 
     r: "ðŸ‡«ðŸ‡· La capitale della Francia Ã¨ **Parigi**."},
    
    {q: ["capitale del giappone", "giappone capitale"], 
     r: "ðŸ‡¯ðŸ‡µ La capitale del Giappone Ã¨ **Tokyo**."},
    
    {q: ["capitale dell'australia", "australia capitale"], 
     r: "ðŸ‡¦ðŸ‡º La capitale dell'Australia Ã¨ **Canberra** (non Sydney!)."},
    
    {q: ["capitale del brasile", "brasile capitale"], 
     r: "ðŸ‡§ðŸ‡· La capitale del Brasile Ã¨ **Brasilia** (non Rio de Janeiro!)."},
    
    {q: ["capitale della cina", "cina capitale"], 
     r: "ðŸ‡¨ðŸ‡³ La capitale della Cina Ã¨ **Pechino**."},
    
    // GEOGRAFIA - FIUMI, MONTAGNE
    {q: ["fiume che attraversa roma", "fiume di roma"], 
     r: "ðŸ›ï¸ Il fiume che attraversa Roma Ã¨ il **Tevere**."},
    
    {q: ["fiume che attraversa parigi", "fiume di parigi"], 
     r: "ðŸ—¼ Il fiume che attraversa Parigi Ã¨ la **Senna**."},
    
    {q: ["fiume che attraversa londra", "fiume di londra"], 
     r: "ðŸ‡¬ðŸ‡§ Il fiume che attraversa Londra Ã¨ il **Tamigi**."},
    
    {q: ["vulcano piÃ¹ alto europa", "vulcano piÃ¹ alto in europa"], 
     r: "ðŸŒ‹ Il vulcano piÃ¹ alto d'Europa Ã¨ l'**Etna** in Sicilia, Italia (circa 3.350 metri)."},
    
    {q: ["vulcano piÃ¹ alto africa", "vulcano piÃ¹ alto in africa"], 
     r: "ðŸŒ Il vulcano piÃ¹ alto d'Africa Ã¨ il **Kilimangiaro** in Tanzania (5.895 metri)."},
    
    // ASTRONOMIA E SPAZIO
    {q: ["pianeta piÃ¹ grande sistema solare", "pianeta piÃ¹ grande"], 
     r: "ðŸª Il pianeta piÃ¹ grande del Sistema Solare Ã¨ **Giove**."},
    
    {q: ["pianeta piÃ¹ caldo sistema solare", "pianeta piÃ¹ caldo"], 
     r: "â˜€ï¸ Il pianeta piÃ¹ caldo del Sistema Solare Ã¨ **Venere** (circa 460Â°C), non Mercurio!"},
    
    {q: ["quanti pianeti nel sistema solare", "pianeti sistema solare quanti"], 
     r: "ðŸŒŒ Nel Sistema Solare ci sono **8 pianeti**: Mercurio, Venere, Terra, Marte, Giove, Saturno, Urano, Nettuno."},
    
    {q: ["quante lune ha saturno", "satelliti saturno"], 
     r: "ðŸª Saturno ha **83 lune confermate** (2023). Le piÃ¹ famose sono Titano ed Encelado."},
    
    {q: ["quante lune ha giove", "satelliti giove"], 
     r: "ðŸª Giove ha **95 lune confermate** (2023). Le piÃ¹ famose sono Io, Europa, Ganimede e Callisto."},
    
    // ANIMALI E NATURA
    {q: ["animale piÃ¹ veloce del mondo", "animale piÃ¹ veloce"], 
     r: "ðŸƒ Il **falco pellegrino** Ã¨ l'animale piÃ¹ veloce in picchiata (oltre 300 km/h). Sulla terra Ã¨ il **ghepardo** (110 km/h)."},
    
    {q: ["animale piÃ¹ grande del mondo", "animale piÃ¹ grande"], 
     r: "ðŸ‹ L'**animale piÃ¹ grande del mondo** Ã¨ la **balenottera azzurra** (fino a 33 metri e 180 tonnellate)."},
    
    {q: ["uccello piÃ¹ grande del mondo", "uccello piÃ¹ grande"], 
     r: "ðŸ¦œ L'**uccello piÃ¹ grande del mondo** Ã¨ lo **struzzo** (fino a 2,7 metri e 150 kg)."},
    
    {q: ["pesce piÃ¹ grande del mondo", "pesce piÃ¹ grande"], 
     r: "ðŸŸ Il **pesce piÃ¹ grande del mondo** Ã¨ lo **squalo balena** (fino a 18 metri e 21 tonnellate)."},
    
    {q: ["rettile piÃ¹ grande del mondo", "rettile piÃ¹ grande"], 
     r: "ðŸŠ Il **rettile piÃ¹ grande del mondo** Ã¨ il **coccodrillo marino** (fino a 7 metri e 1.000 kg)."},
    
    // TECNOLOGIA E INVENZIONI
    {q: ["anno invenzione internet", "quando Ã¨ stato inventato internet", "internet quando inventato"], 
     r: "ðŸŒ Internet Ã¨ nato come **ARPANET** nel **1969**. Il World Wide Web Ã¨ stato inventato da Tim Berners-Lee nel **1989**."},
    
    {q: ["anno primo iphone", "quando Ã¨ uscito il primo iphone", "primo iphone quando"], 
     r: "ðŸ“± Il primo iPhone Ã¨ stato presentato da Steve Jobs il **9 gennaio 2007** e rilasciato il **29 giugno 2007**."},
    
    {q: ["anno primo computer", "quando Ã¨ stato inventato il computer", "primo computer quando"], 
     r: "ðŸ’» Il primo computer programmabile fu lo **Z3** di Konrad Zuse nel **1941**. L'ENIAC, primo computer elettronico, Ã¨ del **1946**."},
    
    {q: ["chi ha inventato la radio", "inventore radio"], 
     r: "ðŸ“» La radio Ã¨ stata inventata da **Guglielmo Marconi** nel 1895."},
    
    {q: ["chi ha inventato la televisione", "inventore tv"], 
     r: "ðŸ“º La televisione elettronica Ã¨ stata inventata da **John Logie Baird** (prima dimostrazione 1926)."},
    
    // CULTURA E ARTE
    {q: ["chi ha scritto l'iliade e l'odissea", "autore iliade odissea"], 
     r: "ðŸ›ï¸ L'Iliade e l'Odissea sono attribuite al poeta greco **Omero** (VIII secolo a.C.)."},
    
    {q: ["chi ha scritto amleto", "autore amleto"], 
     r: "ðŸŽ­ L'Amleto Ã¨ stato scritto da **William Shakespeare** intorno al 1600."},
    
    {q: ["chi ha composto la nona sinfonia", "autore nona sinfonia"], 
     r: "ðŸŽ¼ La Nona Sinfonia Ã¨ stata composta da **Ludwig van Beethoven** e completata nel 1824."},
    
    {q: ["chi ha dipinto la notte stellata", "autore notte stellata"], 
     r: "ðŸŒŒ La Notte Stellata Ã¨ stata dipinta da **Vincent van Gogh** nel 1889."},
    
    {q: ["chi ha diretto il padrino", "regista il padrino"], 
     r: "ðŸŽ¬ Il Padrino Ã¨ stato diretto da **Francis Ford Coppola** (1972)."},
    
    // SPORT
    {q: ["chi ha vinto i mondiali del 2006", "mondiali 2006 vincitore"], 
     r: "âš½ I Mondiali 2006 sono stati vinti dall'**Italia**, che ha battuto la Francia ai rigori."},
    
    {q: ["chi ha vinto i mondiali del 2010", "mondiali 2010 vincitore"], 
     r: "âš½ I Mondiali 2010 sono stati vinti dalla **Spagna**, che ha battuto l'Olanda 1-0."},
    
    {q: ["chi ha vinto i mondiali del 2014", "mondiali 2014 vincitore"], 
     r: "âš½ I Mondiali 2014 sono stati vinti dalla **Germania**, che ha battuto l'Argentina 1-0."},
    
    {q: ["chi ha vinto i mondiali del 2018", "mondiali 2018 vincitore"], 
     r: "âš½ I Mondiali 2018 sono stati vinti dalla **Francia**, che ha battuto la Croazia 4-2."},
    
    {q: ["chi ha vinto i mondiali del 2022", "mondiali 2022 vincitore", "ultimi mondiali vincitore"], 
     r: "âš½ I Mondiali 2022 sono stati vinti dall'**Argentina**, che ha battuto la Francia ai rigori."},
    
    // ECONOMIA E DEMOGRAFIA
    {q: ["paese piÃ¹ popoloso del mondo", "nazione piÃ¹ popolosa", "popolazione mondiale piÃ¹ grande"], 
     r: "ðŸ‘¥ Il paese piÃ¹ popoloso del mondo Ã¨ la **Cina** (circa 1,4 miliardi), seguito dall'**India**."},
    
    {q: ["cittÃ  piÃ¹ popolosa del mondo", "cittÃ  piÃ¹ abitata"], 
     r: "ðŸ™ï¸ La cittÃ  piÃ¹ popolosa del mondo Ã¨ **Tokyo**, Giappone (circa 37 milioni nell'area metropolitana)."},
    
    {q: ["moneta piÃ¹ forte del mondo", "valuta piÃ¹ forte"], 
     r: "ðŸ’± Le valute piÃ¹ forti sono: **Dinaro kuwaitiano (KWD)**, **Dinaro bahreinita (BHD)**, **Rial omanita (OMR)**."},
    
    {q: ["paese piÃ¹ ricco del mondo", "nazione piÃ¹ ricca"], 
     r: "ðŸ’° Il paese piÃ¹ ricco per PIL pro capite Ã¨ il **Lussemburgo**. Per PIL totale sono gli **Stati Uniti**."},
    
    {q: ["lingua piÃ¹ parlata al mondo", "lingua piÃ¹ diffusa"], 
     r: "ðŸ—£ï¸ La lingua piÃ¹ parlata al mondo come madrelingua Ã¨ il **cinese mandarino**. Come seconda lingua Ã¨ l'**inglese**."},
    
    // CURIOSITÃ€ VARIE
    {q: ["quanti ossa ha il corpo umano", "ossa corpo umano"], 
     r: "ðŸ¦´ Il corpo umano adulto ha **206 ossa**. I neonati ne hanno circa 270."},
    
    {q: ["quanti denti ha l'uomo", "denti essere umano"], 
     r: "ðŸ¦· L'uomo adulto ha **32 denti** (inclusi i denti del giudizio)."},
    
    {q: ["quanto sangue ha l'uomo", "sangue corpo umano"], 
     r: "ðŸ©¸ Un adulto ha circa **5-6 litri di sangue** (7-8% del peso corporeo)."},
    
    {q: ["temperatura corporea normale", "temperatura normale uomo"], 
     r: "ðŸŒ¡ï¸ La temperatura corporea normale Ã¨ di circa **36,5-37,5Â°C** (ascellare: 36-37Â°C)."},
    
    {q: ["velocitÃ  della luce", "quanto Ã¨ veloce la luce"], 
     r: "âš¡ La velocitÃ  della luce nel vuoto Ã¨ di **299.792.458 m/s** (circa 300.000 km/s)."},
    
    // MITOLOGIA E RELIGIONE
    {q: ["chi Ã¨ zeus nella mitologia greca", "zeus chi Ã¨"], 
     r: "âš¡ Nella mitologia greca, **Zeus** Ã¨ il re degli dei, dio del cielo e del tuono."},
    
    {q: ["chi Ã¨ atena nella mitologia greca", "atena chi Ã¨"], 
     r: "ðŸ¦‰ Nella mitologia greca, **Atena** Ã¨ la dea della saggezza, della guerra strategica e delle arti."},
    
    {q: ["chi Ã¨ poseidone nella mitologia greca", "poseidone chi Ã¨"], 
     r: "ðŸŒŠ Nella mitologia greca, **Poseidone** Ã¨ il dio del mare, dei terremoti e dei cavalli."},
    
    // LETTERATURA ITALIANA
    {q: ["chi ha scritto i promessi sposi", "autore promessi sposi"], 
     r: "ðŸ“– I Promessi Sposi sono stati scritti da **Alessandro Manzoni** (pubblicato nel 1827)."},
    
    {q: ["chi ha scritto la coscienza di zeno", "autore coscienza di zeno"], 
     r: "ðŸ“š La Coscienza di Zeno Ã¨ stata scritta da **Italo Svevo** (pubblicato nel 1923)."},
    
    {q: ["chi ha scritto il gattopardo", "autore il gattopardo"], 
     r: "ðŸ“• Il Gattopardo Ã¨ stato scritto da **Giuseppe Tomasi di Lampedusa** (pubblicato postumo nel 1958)."},
    
    // MUSICA MODERNA
    {q: ["chi ha cantato bohemian rhapsody", "autore bohemian rhapsody"], 
     r: "ðŸŽ¤ Bohemian Rhapsody Ã¨ stata cantata dai **Queen** (Freddie Mercury come voce principale)."},
    
    {q: ["chi ha scritto thriller", "autore thriller michael jackson"], 
     r: "ðŸ•º Thriller Ã¨ di **Michael Jackson** (album 1982, canzone scritta da Rod Temperton)."},
    
    // FESTE E TRADIZIONI
    {q: ["quando Ã¨ natale", "data natale"], 
     r: "ðŸŽ„ Il Natale si celebra il **25 dicembre**."},
    
    {q: ["quando Ã¨ pasqua", "data pasqua"], 
     r: "ðŸ£ La Pasqua Ã¨ una festa mobile: si celebra la prima domenica dopo la prima luna piena di primavera."},
    
    // ULTIME CURIOSITÃ€
    {q: ["quanto Ã¨ profondo l'oceano", "profonditÃ  oceano", "punto piÃ¹ profondo oceano"], 
     r: "ðŸŒŠ Il punto piÃ¹ profondo dell'oceano Ã¨ la **Fossa delle Marianne** (circa 10.994 metri)."},
    
    {q: ["quanto Ã¨ alto l'everest", "altezza everest"], 
     r: "ðŸ”ï¸ L'Everest Ã¨ alto **8.848,86 metri** (misura ufficiale 2020)."},

    {q: ["canta una canzone", "fai una poesia", "scrivi una storia"], 
     r: "Sono specializzato nell'assistenza per RSM, ma posso suggerirti contenuti creativi interessanti nelle sezioni Articoli e Video del sito!"},
    
    // Domande su privacy e dati
    {q: ["conservi i miei dati", "memorizzi le chat", "dove vanno i miei messaggi", "privacy chat"], 
     r: "Le nostre conversazioni avvengono localmente nel tuo browser e non vengono memorizzate su server esterni. Per maggiori dettagli sulla privacy, consulta la sezione Chi siamo."},
    
    {q: ["come usi i miei dati", "analizzi i miei messaggi", "raccogli dati"], 
     r: "Processo i tuoi messaggi solo per fornirti risposte pertinenti. Non conservo o condivido i tuoi dati con terze parti."},
    
    // Domande di supporto
    {q: ["aiutami", "ho bisogno di aiuto", "supporto", "assistenza", "problema", "non funziona"], 
     r: "Certamente! Cosa ti serve? Posso aiutarti con la navigazione, la ricerca di contenuti o rispondere alle tue domande sul sito RSM."},
    
    {q: ["grazie", "thank you", "ti ringrazio", "sei utile", "sei bravo"], 
     r: "Di nulla! Ãˆ un piacere aiutarti. Se hai altre domande o bisogno di assistenza, sono qui! ðŸ˜Š"},
    
    {q: ["mi dispiace", "scusa", "sorry", "chiedo scusa"], 
     r: "Non c'Ã¨ problema! Sono qui per aiutarti in qualsiasi momento. Cosa ti serve?"},
    
    {q: ["addio", "arrivederci", "ciao ciao", "a presto", "bye", "goodbye"], 
     r: "Arrivederci! Torna quando vuoi se hai bisogno di assistenza con RSM. Buona navigazione! ðŸ‘‹"}
  ];

  // Controlla prima le domande IA frequenti
  for(const domanda of domandeIA) {
    if(domanda.q.some(keyword => m.includes(keyword))) {
      return domanda.r;
    }
  }

   // Lista di insulti e parolacce (anche pesanti)
  const insults = [
    "stupido","idiota","cretino","scemo","imbecille","stronzo","cazzo","merda",
    "bastardo","figlio di puttana","fottuto","coglione","vaffanculo","testa di cazzo",
    "buffone","frocio","negro","zozzo","schifoso","troia","porco","minchia"
  ];

  if(insults.some(i=>m.includes(i))){
    return "Attenzione! Il sito non tollera comportamenti offensivi o linguaggio volgare. Mantieni il rispetto per continuare a usare la chat.";
  }

  // Gestione SÃ¬/No contestuale
  if(lastQuestion){
    if(m.includes("sÃ¬") || m.includes("si") || m.includes("yes")){
      const ans = handleYes(lastQuestion);
      lastQuestion = null;
      return ans;
    }
    if(m.includes("no") || m.includes("non") || m.includes("nope")){
      lastQuestion = null;
      return "Va bene, niente da fare allora.";
    }
  }

  // DOMANDE PRINCIPALI E PAROLE CHIAVE
  const questionSet = [
    // Chi siamo
    {keywords:["chi siete","chi siete?","di cosa parla","cos'Ã¨ questo sito","chi gestisce"], question:"Vuoi aprire la sezione Chi siamo?"},
    // Contatti
    {keywords:["contatti","telefono","email","mail","numero","come contattarvi"], question:"Vuoi aprire la sezione Contatti?"},
    // Articoli
    {keywords:["articoli","article","leggere articoli","ultimi articoli","notizie lunghe"], question:"Vuoi aprire la sezione Articoli?"},
    // Video
    {keywords:["video","vedere video","filmati","clip","guarda video"], question:"Vuoi aprire la sezione Video?"},
    // News
    {keywords:["news","notizie","ultima news","ultime notizie","aggiornamenti"], question:"Vuoi aprire la sezione News?"},
    // Categorie
    {keywords:["categorie","argomenti","temi","topics","classificazioni"], question:"Vuoi aprire la sezione Categorie?"},
    // Suggerimenti generali
    {keywords:["consiglio","cosa leggere","cosa guardare","cosa fare"], question:"Vuoi vedere suggerimenti su cosa leggere o guardare?"},
    // Privacy e sicurezza
    {keywords:["privacy","sicurezza","dati personali","informazioni sensibili"], question:"Vuoi leggere la sezione Chi siamo per info sulla privacy?"},
    // FAQ generali
    {keywords:["ciao","buongiorno","buonasera","buonpomeriggio"], question:"Ciao! Dimmi come posso aiutarti oggi!"},
    // FAQ generali
    {keywords:["come funziona","come usare","istruzioni","aiuto"], question:"Vuoi aprire la sezione Chi siamo o Articoli per capire meglio?"},
    // Altro generico
    {keywords:["dove","come","quando","perchÃ©","perchÃ©","perchÃ¨","perche","spiegami","mostrami"], question:"Prova a chiedere Articoli, Video, News o Contatti per navigare."}
  ];

  // Cerca se il messaggio contiene una keyword
  for(const q of questionSet){
    if(q.keywords.some(k=>m.includes(k))){
      lastQuestion = q.question;
      return randomChoice([
        "Per questo puoi aprire la sezione corrispondente.",
        "Vuoi che apra la sezione per te?",
        "Trovi tutto nella sezione indicata."
      ]);
    }
  }

  // FRASI CHIAVE E RIASSUNTO
  if(m.includes('riassumi') || m.includes('fai un riassunto')){
    let titleMatch = articles.find(a => a.title.toLowerCase() === m.replace(/riassumi|fai un riassunto/gi,'').trim());
    if(titleMatch) return summarizeText(titleMatch.content);
    if(!document.getElementById('single').classList.contains('hidden')){
      return summarizeText(document.getElementById('singleContent').innerText);
    }
    return "Non ho trovato quell'articolo/news. Apri l'articolo o scrivi il titolo esatto da riassumere.";
  }

  // Aggancio diretto delle sezioni principali (come nel tuo codice funzionante)
  if(m.includes("articolo")||m.includes("articoli")){ 
    lastQuestion="Vuoi aprire la sezione Articoli?"; 
    return lastQuestion; 
  }
  if(m.includes("video")){ 
    lastQuestion="Vuoi aprire la sezione Video?"; 
    return lastQuestion; 
  }
  if(m.includes("news")||m.includes("notizie")){ 
    lastQuestion="Vuoi aprire la sezione News?"; 
    return lastQuestion; 
  }
  if(m.includes("categorie")||m.includes("argomento")){ 
    lastQuestion="Vuoi aprire la sezione Categorie?"; 
    return lastQuestion; 
  }
  if(m.includes("chi siamo")||m.includes("chi siete")){ 
    lastQuestion="Vuoi aprire la sezione Chi siamo?"; 
    return lastQuestion; 
  }
  if(m.includes("contatti")||m.includes("telefono")||m.includes("email")){ 
    lastQuestion="Vuoi aprire la sezione Contatti?"; 
    return lastQuestion; 
  }
  if(m.includes("home")||m.includes("inizio")){ 
    showSection('home');
    return "Ti porto alla Home!";
  }

  // Risposte generiche se non riconosce nulla
  const genericResponses = [
    "Non sono sicuro di aver capito. Puoi provare a chiedere Chi siamo, Contatti, Articoli, Video, News o Categorie.",
    "Prova a usare parole chiave come Articoli, Video, News, Categorie o Contatti per navigare.",
    "Per favore, chiedi una sezione specifica e ti guiderÃ².",
    "Se vuoi esplorare il sito, digita Articoli, Video, News, Categorie o Contatti.",
    "Posso aiutarti a navigare nel sito. Chiedimi di aprire una sezione!",
    "Vuoi vedere gli ultimi articoli, video o news? Basta chiedere!"
  ];

  return randomChoice(genericResponses);
}

// Gestione SÃŒ (funzione per aprire effettivamente le sezioni)
function handleYes(question){
  switch(question){
    case "Vuoi aprire la sezione Chi siamo?": 
      showSection('about'); 
      return "Ecco la sezione Chi siamo!";
    case "Vuoi aprire la sezione Contatti?": 
      showSection('contacts'); 
      return "Ti porto nella sezione Contatti.";
    case "Vuoi aprire la sezione Articoli?": 
      showSection('articles'); 
      return "Apro la sezione Articoli per te!";
    case "Vuoi aprire la sezione Video?": 
      showSection('videos'); 
      return "Ecco la sezione Video!";
    case "Vuoi aprire la sezione News?": 
      showSection('news'); 
      return "Ti mostro la sezione News.";
    case "Vuoi aprire la sezione Categorie?": 
      showSection('categories'); 
      return "Aprendo la sezione Categorie.";
    case "Vuoi vedere suggerimenti su cosa leggere o guardare?":
      return "Ti consiglio di guardare gli ultimi articoli e video nella Home, oppure esplora le categorie per trovare contenuti che ti interessano!";
    case "Vuoi leggere la sezione Chi siamo per info sulla privacy?":
      showSection('about');
      return "Qui trovi informazioni sulla nostra missione e sulla gestione dei dati!";
    case "Vuoi aprire la sezione Chi siamo o Articoli per capire meglio?":
      showSection('about');
      return "Ti mostro la sezione Chi siamo per capire meglio di cosa ci occupiamo!";
    case "Prova a chiedere Articoli, Video, News o Contatti per navigare.":
      return "Perfetto! Quale sezione ti interessa? Articoli, Video, News o Contatti?";
    default: 
      return "Perfetto, eseguo la tua richiesta.";
  }
}

// Riassunto testuale semplice
function summarizeText(text,maxSentences=3){
  if(!text) return "Non c'Ã¨ testo da riassumere.";
  const sentences=text.split(/(?<=\.|\?|!)/);
  const wordCounts={};
  const words=text.toLowerCase().replace(/[^a-zÃ Ã¨Ã©Ã¬Ã²Ã¹\s]/g,'').split(/\s+/);
  words.forEach(w=>{if(w.length>3) wordCounts[w]=(wordCounts[w]||0)+1;});
  const sentenceScores=sentences.map(s=>{const sWords=s.toLowerCase().split(/\s+/);let score=0;sWords.forEach(w=>{if(wordCounts[w]) score+=wordCounts[w];});return {sentence:s,score};});
  sentenceScores.sort((a,b)=>b.score-a.score);
  const topSentences=sentenceScores.slice(0,maxSentences).map(s=>s.sentence.trim());
  return topSentences.join(' ');
}
</script>
</body>
</html>
