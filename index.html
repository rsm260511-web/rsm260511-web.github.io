<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>RSM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: #0e0e11;
      color: #eaeaea;
    }
    header {
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee');
      background-size: cover;
      background-position: center;
      padding: 80px 20px;
      text-align: center;
    }
    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 48px;
      margin: 0;
    }
    nav {
      background: #15151c;
      padding: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    nav a {
      color: #eaeaea;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    #titlesContainer a {
      opacity: 0.85;
      margin-right: 10px;
    }
    #titlesContainer a:hover {
      opacity: 1;
      text-decoration: underline;
    }
    #searchBox {
      margin-left: auto;
      position: relative;
    }
    #searchInput {
      padding: 6px;
      font-size: 14px;
      color: #000;
    }
    #searchResults {
      position: absolute;
      top: 32px;
      left: 0;
      right: 0;
      background: #1c1c25;
      z-index: 1000;
      border-radius: 6px;
    }
    #searchResults div {
      padding: 6px;
      cursor: pointer;
    }
    #searchResults div:hover {
      background: #2a2a35;
    }
    main {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    .card {
      background: #1c1c25;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    textarea, input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-family: 'Montserrat', sans-serif;
    }
    button {
      background: #6f7cff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover { background: #5a66e0; }
    #admin, #singleArticle { display: none; }
    .admin-article {
      border: 1px solid #3a3a45;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 6px;
    }
    .admin-article input, .admin-article textarea {
      margin-top: 5px;
      margin-bottom: 5px;
    }
    .admin-controls span {
      cursor: pointer;
      margin-left: 5px;
      color: #ff6b6b;
    }
  </style>
</head>
<body>

<header>
  <h1>RSM</h1>
</header>

<nav>
  <a onclick="showHome()">Home</a>
  <a onclick="askPassword()">Admin</a>
  <span id="titlesContainer"></span>
  <div id="searchBox">
    <input type="text" id="searchInput" placeholder="Cerca..." oninput="searchArticles()">
    <div id="searchResults"></div>
  </div>
</nav>

<main>
  <section id="home">
    <div class="card">
      <h2>Chi siamo?</h2>
      <p id="publicDescription"></p>
    </div>
    <section id="articles"></section>
  </section>

  <section id="singleArticle" class="card">
    <h2 id="singleTitle"></h2>
    <div id="singleContent"></div>

    <!-- Like/Dislike -->
    <div style="margin-top:20px;">
      <button id="likeBtn">üëç Mi piace (<span id="likeCount">0</span>)</button>
      <button id="dislikeBtn">üëé Non mi piace (<span id="dislikeCount">0</span>)</button>
    </div>

    <!-- Commenti -->
    <div style="margin-top:20px;">
      <h3>Commenti</h3>
      <textarea id="commentInput" rows="3" placeholder="Scrivi un commento..."></textarea>
      <button onclick="addComment()">Invia commento</button>
      <div id="commentsList" style="margin-top:10px;"></div>
    </div>
  </section>

  <section id="admin" class="card">
    <h2>Area Admin</h2>

    <h3>Descrizione del sito</h3>
    <textarea id="siteDescription" rows="5"></textarea>
    <button onclick="saveDescription()">Salva descrizione</button>

    <h3>Nuovo contenuto</h3>
    <input type="text" id="title" placeholder="Titolo">
    <textarea id="content" rows="10" placeholder="Testo (puoi incollare immagini)"></textarea>
    <button onclick="addArticle()">Pubblica</button>

    <h3>Articoli esistenti</h3>
    <div id="adminArticles"></div>
  </section>
</main>

<script>
  const ADMIN_PASSWORD = 'vjFDd2kH';
  let articles = [];
  let currentArticleIndex = null;

  // Carica dati da data.json
  fetch('https://raw.githubusercontent.com/rsm260511-web/RSM/refs/heads/main/data.json')
    .then(res => res.json())
    .then(data => {
      document.getElementById('publicDescription').innerText = data.description;
      document.getElementById('siteDescription').value = data.description;
      articles = data.articles;
      renderArticles();
    })
    .catch(err => console.error('Errore caricamento dati:', err));

  function saveDescription() {
    alert('Per aggiornare la descrizione devi modificare il file data.json su GitHub');
  }

  function askPassword() {
    const pass = prompt('Password admin');
    if (pass === ADMIN_PASSWORD) showAdmin();
    else alert('Password errata');
  }

  function renderArticles() {
    const container = document.getElementById('articles');
    const titles = document.getElementById('titlesContainer');
    const adminContainer = document.getElementById('adminArticles');
    container.innerHTML = '';
    titles.innerHTML = '';
    adminContainer.innerHTML = '';

    articles.forEach((a, i) => {
      // Home display
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h2 style='margin-bottom:8px'>${a.title}</h2>`;
      card.onclick = () => openArticle(i);
      container.appendChild(card);

      const link = document.createElement('a');
      link.textContent = a.title;
      link.onclick = () => openArticle(i);
      titles.appendChild(link);

      // Admin display
      const adminCard = document.createElement('div');
      adminCard.className = 'admin-article';
      adminCard.innerHTML = `<strong>${a.title}</strong><p>${a.content.replace(/<br>/g,'\n')}</p>`;
      adminContainer.appendChild(adminCard);
    });
  }

  function addArticle() {
    alert('Per aggiungere articoli devi modificare il file data.json su GitHub');
  }

  function openArticle(i) {
    currentArticleIndex = i;
    document.getElementById('home').style.display = 'none';
    document.getElementById('admin').style.display = 'none';
    document.getElementById('singleArticle').style.display = 'block';
    document.getElementById('singleTitle').innerText = articles[i].title;
    document.getElementById('singleContent').innerText = articles[i].content;

    document.getElementById('likeCount').innerText = articles[i].likes || 0;
    document.getElementById('dislikeCount').innerText = articles[i].dislikes || 0;

    renderComments(i);
  }

  document.getElementById('likeBtn').onclick = () => {
    if (currentArticleIndex !== null) {
      articles[currentArticleIndex].likes = (articles[currentArticleIndex].likes || 0) + 1;
      document.getElementById('likeCount').innerText = articles[currentArticleIndex].likes;
      // qui puoi aggiungere chiamata API per salvare su GitHub
    }
  };

  document.getElementById('dislikeBtn').onclick = () => {
    if (currentArticleIndex !== null) {
      articles[currentArticleIndex].dislikes = (articles[currentArticleIndex].dislikes || 0) + 1;
      document.getElementById('dislikeCount').innerText = articles[currentArticleIndex].dislikes;
      // qui puoi aggiungere chiamata API per salvare su GitHub
    }
  };

  function addComment() {
    const input = document.getElementById('commentInput');
    if (currentArticleIndex !== null && input.value.trim() !== '') {
      if (!articles[currentArticleIndex].comments) articles[currentArticleIndex].comments = [];
      articles[currentArticleIndex].comments.push(input.value.trim());
      input.value = '';
      renderComments(currentArticleIndex);
      // qui puoi aggiungere chiamata API per salvare su GitHub
    }
  }

  function renderComments(i) {
    const list = document.getElementById('commentsList');
    list.innerHTML = '';
    (articles[i].comments || []).forEach(c => {
      const div = document.createElement('div');
      div.style.padding = '6px';
      div.style.borderBottom = '1px solid #2a2a35';
      div.innerText = c;
      list.appendChild(div);
    });
  }

  function showHome() {
    document.getElementById('home').style.display = 'block';
    document.getElementById('admin').style.display = 'none';
    document.getElementById('singleArticle').style.display = 'none';
    renderArticles();
  }

  function showAdmin() {
    document.getElementById('home').style.display = 'none';
    document.getElementById('admin').style.display = 'block';
    document.getElementById('singleArticle').style.display = 'none';
    renderArticles();
  }

  function searchArticles() {
    const q = document.getElementById('searchInput').value.toLowerCase();
    const box = document.getElementById('searchResults');
    box.innerHTML = '';
    if (!q) return;
    articles.filter(a => a.title.toLowerCase().includes(q)).forEach((a, i) => {
      const d = document.createElement('div');
      d.textContent = a.title;
      d.onclick = () => { openArticle(i); box.innerHTML=''; };
      box.appendChild(d);
    });
  }
</script>

</body>
</html>

     
   
    
 
